<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Iron Pulse | Gym Motivation Hub</title>
    <meta name="theme-color" content="#040405" />
    
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <style>
        /* Checked exercise styling */
#screen-setup,
#screen-daily {
    /* Let JS control visibility */
}

#screen-daily {
    display: none; /* first-time visitors see setup */
}

#exercise-list label {
    transition: transform 0.15s ease;
}

#exercise-list input[type="checkbox"]:checked + span {
    text-decoration: line-through;
    opacity: 0.7;
    transform: translateX(2px);
}

.bottom-bar {
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    padding: 0.5rem 1rem;
    background: rgba(4, 4, 5, 0.96);
    border-top: 1px solid var(--card-border);
    display: flex;
    justify-content: center;
    z-index: 20;
}

/* Only show bottom bar on small/medium screens */
@media (min-width: 769px) {
.bottom-bar {
    display: none;
    }
}

.bottom-bar-btn {
    width: 100%;
    max-width: 480px;
    justify-content: center;
}

:root {
    --bg-dark: #040405;
    --bg-panel: #101219;
    --text-primary: #f5f7ff;
    --text-muted: rgba(245, 247, 255, 0.7);
    --accent: #ff512f;
    --accent-2: #dd2476;
    --accent-yellow: #f6c343;
    --card-border: rgba(255, 255, 255, 0.08);
    --glass: rgba(255, 255, 255, 0.05);
        }

* {
    box-sizing: border-box;
    }

body {
    margin: 0;
    font-family: "Space Grotesk", sans-serif;
    color: var(--text-primary);
    background: radial-gradient(circle at top, rgba(255, 81, 47, 0.1), transparent 45%),
        radial-gradient(circle at 20% 20%, rgba(221, 36, 118, 0.25), transparent 35%),
        var(--bg-dark);
    min-height: 100vh;
    line-height: 1.6;
        }

a {
    color: inherit;
    text-decoration: none;
}

header {
    position: sticky;
    top: 0;
    z-index: 10;
    background: rgba(4, 4, 5, 0.85);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid var(--card-border);
}

nav {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem clamp(1rem, 4vw, 3rem);
}

.logo {
    font-weight: 700;
    letter-spacing: 1px;
    font-size: 1.2rem;
    display: flex;
    align-items: center;
    gap: 0.35rem;
}

.logo span {
    color: var(--accent-yellow);
    font-size: 1.4rem;
}

.nav-links {
    display: flex;
    gap: 1.25rem;
    font-size: 0.95rem;
}

.nav-links a {
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 1px;
    font-size: 0.78rem;
}

.btn {
    border: none;
    padding: 0.85rem 1.75rem;
    font-size: 0.95rem;
    font-weight: 600;
    border-radius: 999px;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;

}

.btn-primary {
    background-image: linear-gradient(135deg, var(--accent), var(--accent-2));
    color: #fff;
    box-shadow: 0 20px 40px rgba(255, 81, 47, 0.3);
}

.btn-outline {
    border: 1px solid var(--card-border);
    color: var(--text-muted);
    background: transparent;
}

.btn:hover {
    transform: translateY(-3px);
}
.day-pill {
    border: 1px solid var(--card-border);
    background: transparent;
    color: var(--text-muted);
    padding: 0.5rem 1rem;
    border-radius: 999px;
    font-size: 0.85rem;
    cursor: pointer;
    transition: background 0.2s ease, transform 0.2s ease, border-color 0.2s ease;
}

.day-pill:hover {
    transform: translateY(-1px);
    border-color: var(--accent);
}

.day-pill.active {
    background-image: linear-gradient(135deg, var(--accent), var(--accent-2));
    color: #fff;
    border-color: transparent;
}


main {
    padding: clamp(2rem, 5vw, 4rem) clamp(1rem, 5vw, 4rem) 6rem;
}

.hero {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 3rem;
    align-items: center;
    padding: clamp(2rem, 5vw, 4rem);
    border-radius: 2rem;
    background: linear-gradient(145deg, rgba(255, 81, 47, 0.1), rgba(4, 4, 5, 0.9));
    border: 1px solid var(--card-border);
}

.hero h1 {
    font-size: clamp(2.3rem, 6vw, 3.8rem);
    line-height: 1.1;
    margin-bottom: 1rem;
}

.hero p {
    color: var(--text-muted);
    max-width: 480px;
}

.stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 1rem;
    margin: 2.5rem 0;
}

.stat-card {
    padding: 1.25rem;
    border-radius: 1rem;
    background: var(--bg-panel);
    border: 1px solid var(--card-border);
    text-align: center;
}

.stat-card strong {
    display: block;
    font-size: 2rem;
    margin-bottom: 0.25rem;
    color: var(--accent-yellow);
}

.hero-panel {
    background: var(--bg-panel);
    border-radius: 1.5rem;
    padding: 2rem;
    border: 1px solid var(--card-border);
    box-shadow: 0 30px 60px rgba(0, 0, 0, 0.35);
}

.hero-panel .badge {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    border-radius: 999px;
    padding: 0.35rem 1rem;
    font-size: 0.8rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    background: rgba(255, 255, 255, 0.08);
    margin-bottom: 1rem;
}

.section {
    margin-top: clamp(3rem, 7vw, 5rem);
}

.section-head {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 1.5rem;
    flex-wrap: wrap;
    gap: 1rem;
}

.section-head h2 {
    margin: 0;
    font-size: clamp(1.6rem, 4vw, 2.45rem);
}

.grid {
    display: grid;
    gap: 1.5rem;
}

@media (min-width: 768px) {
    .grid-3 {
        grid-template-columns: repeat(3, minmax(0, 1fr));
    }
}

.workout-card {
    background: var(--bg-panel);
    border-radius: 1.5rem;
    padding: 1.75rem;
    border: 1px solid var(--card-border);
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.workout-card h3 {
    margin: 0;
}

.workout-card ul {
    list-style: none;
    padding: 0;
    margin: 0;
    color: var(--text-muted);
    font-size: 0.95rem;
}

.motivation-board {
    display: grid;
    grid-template-columns: minmax(0, 1fr);
    gap: 1.5rem;
}


.motivation-card {
    padding: 1.5rem;
    border-radius: 1.25rem;
    border: 1px solid var(--card-border);
    background: var(--glass);
    min-height: 220px;
    display: flex;
    flex-direction: column;
}

.quote {
    font-size: 1.1rem;
    margin: 1rem 0 0.5rem;
}

.range-wrapper {
    margin-top: auto;
}

input[type="range"] {
    width: 100%;
    accent-color: var(--accent);
}

.stories {
    background: linear-gradient(120deg, rgba(255, 81, 47, 0.18), rgba(16, 18, 25, 0.95));
    padding: clamp(2rem, 4vw, 3rem);
    border-radius: 2rem;
    border: 1px solid var(--card-border);
}

.story {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 1.5rem;
    margin-top: 2rem;
}

.story-card {
    background: rgba(0, 0, 0, 0.35);
    padding: 1.5rem;
    border-radius: 1.25rem;
    border: 1px solid var(--card-border);
}

.story-card strong {
    color: var(--accent-yellow);
}

.cta {
    margin-top: 4rem;
    padding: clamp(2.5rem, 5vw, 3.5rem);
    border-radius: 2rem;
    text-align: center;
    border: 1px solid var(--card-border);
    background: linear-gradient(145deg, rgba(16, 18, 25, 0.9), rgba(255, 81, 47, 0.12));
}

.cta h3 {
    font-size: clamp(1.8rem, 4vw, 2.8rem);
    margin-bottom: 0.5rem;
}

footer {
    padding: 2rem clamp(1rem, 5vw, 4rem) 3rem;
    text-align: center;
    color: var(--text-muted);
    border-top: 1px solid var(--card-border);
    background: rgba(0, 0, 0, 0.35);
}

@media (max-width: 768px) {
    body {
        line-height: 1.5;
    }

    main {
        padding: 1.5rem 1rem 3rem;
    }

    /* Nav stacks nicely */
    nav {
        flex-direction: column;
        gap: 0.75rem;
        align-items: flex-start;
    }

    .nav-links {
        width: 100%;
        justify-content: flex-start;
        flex-wrap: wrap;
        gap: 0.75rem;
        font-size: 0.75rem;
    }

    /* Hero stacks into one column, centered text */
    .hero {
        grid-template-columns: 1fr;
        padding: 1.75rem 1.25rem;
        text-align: left;
    }

    .hero h1 {
        font-size: 1.9rem;
    }

    .hero p {
        max-width: 100%;
    }

    .stats {
        margin: 1.5rem 0;
    }

    /* Make buttons easier to tap */
    .hero .btn {
        width: 100%;
        justify-content: center;
    }

    /* Sections a bit closer together on mobile */
    .section {
        margin-top: 2.25rem;
    }

    .section-head {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
    }

    .workout-card,
    .motivation-card,
    .cta {
        padding: 1.5rem 1.25rem;
        border-radius: 1.25rem;
    }

    /* Quote: big but not overwhelming */
    .quote {
        font-size: 1.25rem;
    }
}
.streak-banner {
    margin-bottom: 1rem;
    padding: 0.75rem 1rem;
    border-radius: 999px;
    background: linear-gradient(135deg, rgba(255, 81, 47, 0.18), rgba(246, 195, 67, 0.12));
    border: 1px solid var(--card-border);
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-primary);
}

.streak-banner span {
    font-weight: 500;
}

.hidden {
    display: none;
}
.finisher-card.locked {
    opacity: 0.6;
    border-style: dashed;
}

.finisher-card:not(.locked) {
    opacity: 1;
    border-style: solid;
}



    </style>
</head>

<body>
    <header>
        <nav>
            <div class="logo"><span>*</span>Iron Pulse</div>
            <div class="nav-links">
                <a href="#split">Today's Split</a>
                <a href="#motivation">Mindset</a>
            </div>
            <a href="#" id="open-settings-btn">Setup</a>

            <button class="btn btn-primary" id="hero-cta">Start Today</button>
        </nav>
    </header>

    <main>
        <div id="streak-banner" class="streak-banner hidden">
            <span id="streak-text"></span>
        </div>
    <div id="screen-setup">
        <section class="hero">
            <div>
                <p class="badge" style="letter-spacing:2px;">Daily Grind - No Excuses</p>
                <h1>Build strength, discipline, and a body you are proud of.</h1>
                <p>
                    Iron Pulse is your training partner. Follow structured workouts, track intensity, and get the
                    motivation you need to stay consistent, even when the weights feel heavy.
                </p>
                <div style="display:flex;gap:1rem;flex-wrap:wrap;margin-top:2rem;">
                    <button class="btn btn-primary" id="add-to-home-btn">
                        Add to Home Screen
                    </button>
                
                    <a class="btn btn-outline" href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" target="_blank"
                        rel="noopener noreferrer">
                        Watch Trailer
                    </a>
                </div>

                <div class="stats">
                    <div class="stat-card">
                        <strong>4 days</strong>
                        training goal this week
                    </div>
                    <div class="stat-card">
                        <strong id="streak-value">1</strong>
                        day streak active
                    </div>
                    <div class="stat-card">
                        <strong>30 min</strong>
                        minimum effort today
                    </div>
                    <div class="stat-card">
                        <strong>1 session</strong>
                        is better than 0
                    </div>
                </div>

            </div>

            

            <div class="hero-panel">
                <div class="badge">
                    This Week's Focus
                </div>
                <h2 id="weely-focus-title" style="margin-top:0;">4-Day Upper / Lower Split</h2>
                <p style="color:var(--text-muted);">
                    You commited to showing up 4 days this week. Hit your main lifts, move with intent, and leave the gym knowing you did what you said you would.</p>
                <ul style="list-style:none;padding:0;margin:1.5rem 0;color:var(--text-muted);">
                    <li>&bull; Main goal: complete all 4 training days</li>
                    <li>&bull; Pace yourself: no ego lifting on tired days</li>
                    <li>&bull; Optional: unlock a finisher if energy is high</li>
                </ul>
                <div style="display:flex;gap:1rem;align-items:center;">
                    <button class="btn btn-primary" style="flex:1;">Adjust This Week</button>
                    <button class="btn btn-outline" style="flex:1;">View Weekly Plan</button>
                </div>
                <p style="font-size:0.85rem;color:var(--text-muted);margin-top:1.5rem;">Decide once, follow through all week.</p>
            </div>
        </section>
        <section class="section" id="weekly-goal">
    <div class="section-head">
        <h2>Weekly Training Goal</h2>
        <p style="color:var(--text-muted);max-width:520px;">
            Decide how many days you're committing to this week. The app will measure success against this number, not
            perfection.
        </p>
    </div>

    <div class="workout-card">
        <p style="margin-top:0;color:var(--text-muted);">
            I'm aiming to train this many days this week:
        </p>
        <div style="display:flex;flex-wrap:wrap;gap:0.5rem;margin-bottom:1rem;">
            <button class="day-pill" data-days="3">3 days</button>
            <button class="day-pill" data-days="4">4 days</button>
            <button class="day-pill" data-days="5">5 days</button>
            <button class="day-pill" data-days="6">6 days</button>
            <button class="day-pill" data-days="7">7 days</button>
        </div>
        <p id="weekly-goal-summary" style="margin:0;color:var(--text-muted);font-size:0.95rem;">
            Goal: 4 days this week • Progress: 0 / 4 sessions logged
        </p>
    </div>
</section>
<section class="section" id="install">
    <div class="section-head">
        <h2>Install Iron Pulse as an App</h2>
        <p style="color:var(--text-muted);max-width:520px;">
            Add Iron Pulse to your home screen so it opens like a dedicated gym app before every session.
        </p>
    </div>

    <div class="grid">
        <article class="workout-card">
            <h3>On Android (Chrome)</h3>
            <ul>
                <li>1. Open this page in Chrome.</li>
                <li>2. Tap the menu button (⋮) in the top-right.</li>
                <li>3. Tap <strong>Add to Home screen</strong> or <strong>Install app</strong>.</li>
                <li>4. Confirm, then open it from your home screen like any other app.</li>
            </ul>
        </article>

        <article class="workout-card">
            <h3>On iPhone (Safari)</h3>
            <ul>
                <li>1. Open this page in Safari.</li>
                <li>2. Tap the <strong>Share</strong> button (square with arrow).</li>
                <li>3. Scroll down and tap <strong>Add to Home Screen</strong>.</li>
                <li>4. Name it “Iron Pulse” and tap <strong>Add</strong>.</li>
            </ul>
                </article>
            </div>
        </section>


    </div>    
        
<div id="screen-daily">



        <section class="section" id="split">
            <div class="section-head">
                <h2>Today's Split</h2>
                <p style="color:var(--text-muted);max-width:480px;">
                    Open this before you train. Get a simple plan for the day, check off each exercise as you finish,
                    and keep your sessions focused instead of guessing.
                </p>
            </div>
            




        
            <div class="workout-card">
                <div style="display:flex;justify-content:space-between;align-items:center;">
                    <h3 id="split-name">Loading split...</h3>
                    <span id="split-days" style="color:var(--accent-yellow);font-weight:600;"></span>
                </div>
                <p id="split-description" style="color:var(--text-muted);margin:0 0 1rem 0;">
                    <!-- Filled by JavaScript -->
                </p>
                <ul id="exercise-list" style="list-style:none;padding:0;margin:0;color:var(--text-muted);">
                    <!-- Exercises with checkboxes will be injected here -->
                </ul>
            </div>
        </section>


        <section class="section" id="motivation">
            <div class="section-head">
                <h2>Mental reps matter.</h2>
                <p style="color:var(--text-muted);max-width:520px;">Stay consistent with a motivation board that responds
                    to your intensity, highlights your streak, and throws a new quote when you need it.</p>
            </div>
            <div class="motivation-board">
                <div class="motivation-card" style="min-height:260px;">
                    <strong style="text-transform:uppercase;letter-spacing:1px;color:var(--accent-yellow);">
                        Daily Quote
                    </strong>
                    <p id="quote" class="quote" style="font-size:1.5rem;">
                        Motivation fades. Discipline doesn’t.
                    </p>
                    <p id="quote-author" style="color:var(--text-muted);font-size:0.9rem;">
                        - Iron Pulse
                    </p>
                </div>
            </div>
        </section>

        <section class="section" id="finisher">
            <div class="section-head">
                <h2>Today’s Finisher</h2>
                <p style="color:var(--text-muted);max-width:520px;">
                    Finish your main work first. If you’ve got something left in the tank, unlock today’s optional finisher.
                </p>
            </div>
        
            <article class="workout-card finisher-card locked" id="finisher-card">
                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:0.5rem;">
                    <h3 id="finisher-title" style="margin:0;">Locked</h3>
                    <span id="finisher-tag" style="color:var(--accent-yellow);font-size:0.85rem;text-transform:uppercase;">
                        Complete your sets
                    </span>
                </div>
                <p id="finisher-description" style="color:var(--text-muted);margin:0 0 0.75rem 0;">
                    Check off all exercises in Today’s Split to unlock this finisher.
                </p>
                <p id="finisher-status" style="color:var(--text-muted);font-size:0.9rem;margin:0 0 1rem 0;">
                    Main work first. Earn the extra.
                </p>
                <div style="display:flex;gap:0.75rem;flex-wrap:wrap;">
                    <button class="btn btn-primary" id="finisher-do-btn" disabled>Do the Finisher</button>
                    <button class="btn btn-outline" id="finisher-skip-btn" disabled>Skip for Today</button>
                </div>
            </article>
        </section>



        <section class="cta" id="cta">
            <h3>Pressure makes diamonds. Join the crew.</h3>
            <p style="color:var(--text-muted);max-width:520px;margin:0 auto 1.5rem;">Weekly programming drops, private
                community, seasonal challenges, and a coach that answers when you need the push.</p>
            <div style="display:flex;flex-wrap:wrap;gap:1rem;justify-content:center;">
                <button class="btn btn-primary">Claim My Spot</button>
                <button class="btn btn-outline">Preview Inside</button>
            </div>
        </section>
</div>
    </main>

    <footer>
        <p>Iron Pulse Collective - Built for the relentless - Train hard, recover harder.</p>
    </footer>
<div class="bottom-bar">
    <button class="btn btn-primary bottom-bar-btn" id="bottom-split-btn">
        Today's Split
    </button>
</div>

<script>
    const ONBOARDED_KEY = "ironPulseOnboarded";
    const LAST_SCREEN_KEY = "ironPulseLastScreen";
    function showScreen(name) {
            const setup = document.getElementById("screen-setup");
            const daily = document.getElementById("screen-daily");
            if (!setup || !daily) return;

            if (name === "setup") {
                setup.style.display = "block";
                daily.style.display = "none";
            } else {
                setup.style.display = "none";
                daily.style.display = "block";
            }

            // remember last screen
            localStorage.setItem(LAST_SCREEN_KEY, name);
        }

    function initScreens() {
            const onboarded = localStorage.getItem(ONBOARDED_KEY) === "true";
            const last = localStorage.getItem(LAST_SCREEN_KEY);

            if (!onboarded) {
                // first time using the app → show setup
                showScreen("setup");
            } else if (last) {
                // return user → go where they were last
                showScreen(last);
            } else {
                // default for onboarded users
                showScreen("daily");
            }

            // Hook up "Start Training" if you want a button for it
            const startBtn = document.getElementById("start-training-btn");
            if (startBtn) {
                startBtn.addEventListener("click", () => {
                    localStorage.setItem(ONBOARDED_KEY, "true");
                    showScreen("daily");
                });
            }

            // Optional: a way back to setup (like a Settings button)
            const settingsBtn = document.getElementById("open-settings-btn");
            if (settingsBtn) {
                settingsBtn.addEventListener("click", () => {
                    showScreen("setup");
                });
            }
        }



    // ===== QUOTES =====
    const quotes = [
        { text: "You will not always be motivated, so you must learn to be disciplined.", author: "Unknown" },
        { text: "Sweat is just fat crying, so let it all out.", author: "Iron Pulse" },
        { text: "Champions keep going when there is nothing left in the tank.", author: "Andre Ward" },
        { text: "The body achieves what the mind believes.", author: "Anonymous" },
        { text: "Most give up at forty percent. Your next PR sits beyond that wall.", author: "Coach Nia" }
    ];
    const WEEKLY_GOAL_KEY = "ironPulseWeeklyGoalDays";
        const DEFAULT_WEEKLY_GOAL = 4;

    function getWeeklyGoal() {
            const stored = localStorage.getItem(WEEKLY_GOAL_KEY);
            const parsed = stored ? parseInt(stored, 10) : NaN;
            if (!parsed || parsed < 3 || parsed > 7) {
                return DEFAULT_WEEKLY_GOAL;
            }
            return parsed;
        }

        function setWeeklyGoal(days) {
            localStorage.setItem(WEEKLY_GOAL_KEY, String(days));
        }
    function updateWeeklyGoalUI() {
            const goal = getWeeklyGoal();

            // Highlight the selected pill
            const pills = document.querySelectorAll(".day-pill");
            pills.forEach(pill => {
                const pillDays = parseInt(pill.getAttribute("data-days"), 10);
                if (pillDays === goal) {
                    pill.classList.add("active");
                } else {
                    pill.classList.remove("active");
                }
            });

            // Update summary text
            const summaryEl = document.getElementById("weekly-goal-summary");
            if (summaryEl) {
                // For now we hardcode progress as 0 / goal; you’ll wire real progress later
                summaryEl.textContent = `Goal: ${goal} days this week • Progress: 0 / ${goal} sessions logged`;
            }

            // Update This Week's Focus title if present
            const focusTitleEl = document.getElementById("weekly-focus-title");
            if (focusTitleEl) {
                focusTitleEl.textContent = `${goal}-Day Training Week`;
            }
        }

    function initWeeklyGoalControls() {
            const pills = document.querySelectorAll(".day-pill");
            if (!pills.length) return;

            const currentGoal = getWeeklyGoal();

            // Initialize active state
            pills.forEach(pill => {
                const pillDays = parseInt(pill.getAttribute("data-days"), 10);
                if (pillDays === currentGoal) {
                    pill.classList.add("active");
                }

                pill.addEventListener("click", () => {
                    const days = parseInt(pill.getAttribute("data-days"), 10);
                    setWeeklyGoal(days);
                    updateWeeklyGoalUI();
                });
            });

            updateWeeklyGoalUI();
        }





    const quoteEl = document.getElementById("quote");
    const authorEl = document.getElementById("quote-author");
    let quoteIndex = 0;

    function rotateQuote() {
        quoteIndex = (quoteIndex + 1) % quotes.length;
        quoteEl.textContent = quotes[quoteIndex].text;
        authorEl.textContent = "- " + quotes[quoteIndex].author;
    }

    // Rotate quote every 6 seconds
    setInterval(rotateQuote, 6000);

    // ===== HERO BUTTON SCROLL =====
    const heroCta = document.getElementById("hero-cta");
    if (heroCta) {
        heroCta.addEventListener("click", () => {
            localStorage.setItem(ONBOARDED_KEY, "true");
            showScreen("daily");
        });
    }

    const bottomSplitBtn = document.getElementById("bottom-split-btn");
    if (bottomSplitBtn) {
        bottomSplitBtn.addEventListener("click", () => {
            document.getElementById("split")?.scrollIntoView({ behavior: "smooth" });
        });
    }
    const addToHomeBtn = document.getElementById("add-to-home-btn");
        if (addToHomeBtn) {
            addToHomeBtn.addEventListener("click", () => {
                document.getElementById("install")?.scrollIntoView({ behavior: "smooth" });
            });
        }


    // ===== TODAY'S SPLIT DATA =====
    const splits = [
        {
            name: "Push Day – Chest, Shoulders, Triceps",
            days: "Example: Mon / Thu",
            description: "Press-focused session with plenty of push volume.",
            exercises: [
                "Barbell or DB Bench Press – 4 x 6–8",
                "Overhead Press – 3 x 8–10",
                "Incline DB Press – 3 x 10–12",
                "Lateral Raises – 3 x 15",
                "Cable Triceps Pushdown – 3 x 12–15"
            ]
        },
        {
            name: "Pull Day – Back, Biceps",
            days: "Example: Tue / Fri",
            description: "Pull-heavy work to build your back and biceps.",
            exercises: [
                "Deadlifts or RDL – 4 x 5",
                "Pull-Ups or Lat Pulldown – 4 x 8–10",
                "Seated Row – 3 x 10–12",
                "Face Pulls – 3 x 15",
                "Barbell or DB Curls – 3 x 10–12"
            ]
        },
        {
            name: "Leg Day – Quads, Hamstrings, Glutes",
            days: "Example: Wed / Sat",
            description: "Lower-body work that actually moves the bar.",
            exercises: [
                "Squats – 4 x 5–8",
                "Romanian Deadlift – 3 x 8–10",
                "Leg Press or Lunges – 3 x 10–12",
                "Hamstring Curls – 3 x 12–15",
                "Calf Raises – 3 x 15–20"
            ]
        },
        {
            name: "Full Body – Lighter Day",
            days: "Example: Sunday or optional",
            description: "Keep the habit alive with lighter full-body work.",
            exercises: [
                "Goblet Squats – 3 x 10",
                "Push-Ups – 3 x AMRAP",
                "DB Rows – 3 x 10–12",
                "Plank – 3 x 30–45 seconds"
            ]
        }
    ];

    const finishers = [
            {
                title: "Engine Burnout",
                tag: "Conditioning",
                description: "3 rounds: 30s assault bike or fast walk, 30s rest, then 10 burpees.",
            },
            {
                title: "Pump Set",
                tag: "Hypertrophy",
                description: "2 sets: 20 slow pushups, 20 band pull-aparts, 30s plank.",
            },
            {
                title: "Core Lock-In",
                tag: "Core",
                description: "3 rounds: 20s hollow hold, 20s side plank each side, 10 dead bugs.",
            },
            {
                title: "Leg Burner",
                tag: "Legs",
                description: "2 sets: 15 walking lunges, 20 bodyweight squats, 30s wall sit.",
            }
        ];

        function getTodayFinisher() {
            // Simple tie-in: re-use today's split index so finisher "matches" the day
            const splitIndex = getTodaySplitIndex ? getTodaySplitIndex() : 0;
            return finishers[splitIndex % finishers.length];
        }


    function getTodaySplitIndex() {
        const today = new Date().getDay(); // 0 = Sun, 1 = Mon, ...
        const map = {
            0: 3, // Sunday -> Full Body
            1: 0, // Monday -> Push
            2: 1, // Tuesday -> Pull
            3: 2, // Wednesday -> Legs
            4: 0, // Thursday -> Push
            5: 1, // Friday -> Pull
            6: 2  // Saturday -> Legs
        };
        return map[today] ?? 0;
    }

    function renderTodaySplit() {
            const splitNameEl = document.getElementById("split-name");
            const splitDaysEl = document.getElementById("split-days");
            const splitDescEl = document.getElementById("split-description");
            const exerciseListEl = document.getElementById("exercise-list");

            if (!splitNameEl || !exerciseListEl) return;

            const split = splits[getTodaySplitIndex()];

            splitNameEl.textContent = split.name;
            splitDaysEl.textContent = split.days;
            splitDescEl.textContent = split.description;

            // Clear old list
            exerciseListEl.innerHTML = "";

            split.exercises.forEach((exercise, index) => {
                const li = document.createElement("li");
                li.style.marginBottom = "0.5rem";

                const id = `exercise-${index}`;

                li.innerHTML = `
            <label style="display:flex;align-items:center;gap:0.5rem;cursor:pointer;">
                <input type="checkbox" id="${id}" />
                <span>${exercise}</span>
            </label>
        `;

                exerciseListEl.appendChild(li);

                const checkbox = li.querySelector('input[type="checkbox"]');
                if (checkbox) {
                    checkbox.addEventListener("change", () => {
                        if ("vibrate" in navigator) {
                            navigator.vibrate(20);
                        }
                        checkSplitCompletion();
                    });
                }
            });

            // Ensure finisher starts in locked state
            checkSplitCompletion();
        }

    function checkSplitCompletion() {
        const exerciseListEl = document.getElementById("exercise-list");
        if (!exerciseListEl) {
            // If for some reason we can't find the list, keep finisher locked
            updateFinisherLockState(false);
            return;
        }

        const checkboxes = exerciseListEl.querySelectorAll('input[type="checkbox"]');

        if (!checkboxes.length) {
            updateFinisherLockState(false);
            return;
        }

        let allChecked = true;
        checkboxes.forEach(cb => {
            if (!cb.checked) {
                allChecked = false;
            }
        });

        // If ALL are checked → unlock, otherwise stay locked
        updateFinisherLockState(allChecked);
    }

    // ===== STREAK TRACKER (localStorage) =====
    function updateStreak() {
        const key = "ip_streak";
        const today = new Date();
        const todayStr = today.toISOString().slice(0, 10); // YYYY-MM-DD

        let stored;
        try {
            stored = JSON.parse(localStorage.getItem(key) || "{}");
        } catch {
            stored = {};
        }

        let streak = stored.streak || 0;
        let lastDate = stored.lastDate;

        if (!lastDate) {
            streak = 1;
        } else if (lastDate === todayStr) {
            // Same day: keep streak as is
        } else {
            const last = new Date(lastDate);
            const diffMs = today - last;
            const diffDays = Math.floor(diffMs / 86400000);

            if (diffDays === 1) {
                streak += 1; // consecutive day
            } else {
                streak = 1; // reset
            }
        }

        localStorage.setItem(key, JSON.stringify({ streak, lastDate: todayStr }));

        const banner = document.getElementById("streak-banner");
        const textEl = document.getElementById("streak-text");

        if (banner && textEl) {
            banner.classList.remove("hidden");
            if (streak === 1) {
                textEl.textContent = "Day 1 – You started. Show up again tomorrow.";
            } else {
                textEl.textContent = `Streak: ${streak} days in a row. Keep it alive.`;
            }
        }
        const streakValueEl = document.getElementById("streak-value");
        if (streakValueEl) {
            streakValueEl.textContent = streak;
        }

    }



    function initFinisherControls() {
            const doBtn = document.getElementById("finisher-do-btn");
            const skipBtn = document.getElementById("finisher-skip-btn");
            const statusEl = document.getElementById("finisher-status");

            if (doBtn) {
                doBtn.addEventListener("click", () => {
                    if (!statusEl) return;
                    statusEl.textContent = "Finisher complete. You just built extra capacity for later in the week.";
                    // Later: increment finishersCompletedThisWeek, maybe build toward rest tokens
                });
            }

            if (skipBtn) {
                skipBtn.addEventListener("click", () => {
                    if (!statusEl) return;
                    statusEl.textContent = "Skipped today’s finisher. Recovery is part of progress.";
                    // No penalty, just a clear message.
                });
            }
        }


    function updateFinisherLockState(isUnlocked) {
        const card = document.getElementById("finisher-card");
        const titleEl = document.getElementById("finisher-title");
        const tagEl = document.getElementById("finisher-tag");
        const descEl = document.getElementById("finisher-description");
        const statusEl = document.getElementById("finisher-status");
        const doBtn = document.getElementById("finisher-do-btn");
        const skipBtn = document.getElementById("finisher-skip-btn");

        if (!card || !titleEl || !tagEl || !descEl || !statusEl || !doBtn || !skipBtn) return;

        if (!isUnlocked) {
            card.classList.add("locked");
            titleEl.textContent = "Locked";
            tagEl.textContent = "Complete your sets";
            descEl.textContent = "Check off all exercises in Today’s Split to unlock this finisher.";
            statusEl.textContent = "Main work first. Earn the extra.";
            doBtn.disabled = true;
            skipBtn.disabled = true;
            return;
        }

        // Unlocked path
        const finisher = getTodayFinisher();
        card.classList.remove("locked");
        titleEl.textContent = finisher.title;
        tagEl.textContent = finisher.tag;
        descEl.textContent = finisher.description;
        statusEl.textContent = "Optional: if you have energy, hit this finisher. Or skip and recover.";
        doBtn.disabled = false;
        skipBtn.disabled = false;
    }

    // ===== SERVICE WORKER REGISTRATION =====
        if ("serviceWorker" in navigator) {
            window.addEventListener("load", () => {
                navigator.serviceWorker
                    .register("./sw.js")
                    .then((registration) => {
                        console.log("Service worker registered:", registration.scope);
                    })
                    .catch((err) => {
                        console.log("Service worker registration failed:", err);
                    });
            });
        }

        // ===== APP INIT =====
        window.addEventListener("DOMContentLoaded", () => {
            renderTodaySplit();          // build today's split + checkboxes
            initWeeklyGoalControls();    // set up 3–7 day goal buttons
            initScreens();               // show setup vs daily, depending on localStorage
            initFinisherControls();      // wire finisher buttons

            // Optional, if you still use these:
            updateStreak?.();            // only if this function exists
            updateIntensity?.();         // only if intensity slider still exists
            rotateQuote?.();             // only if you want quotes rotating on load
        });


</script>


</body>

</html>
