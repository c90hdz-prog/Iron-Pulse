<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />

    <title>Iron Pulse | Gym Motivation Hub</title>
    <meta name="theme-color" content="#040405" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Correct manifest path -->
    <link rel="manifest" href="manifest.json">

    <!-- Fallback favicon (use 512 since 192 doesn't exist) -->
    <link rel="icon" href="icons/icon-512.png">

    <!-- iOS support -->
    <link rel="apple-touch-icon" href="icons/icon-512.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<link href="https://fonts.googleapis.com/css2?family=Urbanist:wght@300;400;500;600;700&display=swap" rel="stylesheet">



    <style>
 /* ===================================================================
     üé® THEME CONTROL PANEL
     =================================================================== */
:root {


--font-main: 'Urbanist', sans-serif;

  /* ====== BRAND ACCENTS / THEME TOKENS ====== */
  /* ------------------------------------------ */

  /* Core accent palette (hex) */
  --accent-primary:   #0d0b82;   /* deep indigo */
  --accent-secondary: #aaa8ff;   /* soft lilac */
  --accent-yellow:    #f2ecff;   /* pale highlight */

  --bg-page:    #020204;
  --bg-top-glow: rgba(100, 100, 255, 0.22);

  --surface-main:   #0e0d12;
  --surface-subtle: #15141a;

  --accent-warm-start:       #1a17c0;
  --accent-warm-end:         #a29cff;
  --accent-warm-soft-start:  rgba(26, 23, 192, 0.35);  /* from warm start */
  --accent-warm-soft-end:    rgba(162, 156, 255, 0.28);

  --text-primary: rgba(245, 245, 255, 0.95);
  --text-muted:   rgba(200, 200, 220, 0.55);
  --text-accent:  #d2ceff;

  --card-border: rgba(150, 150, 255, 0.08);

  /* Neutral / focus surfaces */
  --surface-focus-row-start: #121623;
  --surface-focus-row-end:   #0c0e16;
  --surface-focus-pill:      rgba(9, 12, 26, 0.96);

  --border-soft:        rgba(148, 163, 184, 0.28);
  --border-soft-strong: rgba(148, 163, 184, 0.40);

  /* === Accent RGB helpers (for aura / glows) === */
  --accent-rgb:             13, 11, 130;   /* from --accent-primary */
  --accent-2-rgb:           170, 168, 255; /* from --accent-secondary */
  --accent-warm-start-rgb:  26, 23, 192;   /* from --accent-warm-start */

  /* Aura / glow tokens (theme-aware) */
  --aura-soft:   rgba(var(--accent-rgb), 0.18);
  --aura-strong: rgba(var(--accent-rgb), 0.65);
  --aura-glow:   rgba(var(--accent-2-rgb), 0.50);
  --aura-border: rgba(var(--accent-warm-start-rgb), 0.90);

  /* Progress / dots / completed row */
  --accent-progress:       var(--accent-warm-start);
  --accent-progress-soft:  rgba(var(--accent-warm-start-rgb), 0.70);
  --accent-progress-soft2: rgba(162, 156, 255, 0.55); /* from --accent-warm-end */

  /* STREAK COLORS (feel free to tweak later) */
  --streak-grad-start: rgba(var(--accent-rgb), 0.7);
  --streak-grad-end:   rgba(var(--accent-2-rgb), 0.7);

  --streak-hot-1:      #5b8dff;
  --streak-hot-2:      #9ea8ff;
  --streak-hot-glow:   rgba(158, 168, 255, 0.9);

  /* Shadow tokens */
  --shadow-soft:    0 10px 26px rgba(0, 0, 0, 0.55);
  --shadow-medium:  0 18px 40px rgba(0, 0, 0, 0.75);
  --shadow-strong:  0 24px 50px rgba(0, 0, 0, 0.88);

  --shadow-accent-soft:   0 16px 32px var(--aura-soft);
  --shadow-accent-strong: 0 18px 38px var(--aura-strong);

  --shadow-progress:        0 0 12px var(--accent-progress-soft);
  --shadow-progress-strong: 0 0 20px var(--accent-progress-soft2);



  /* Progress / dots / completed row */
  --accent-progress:       var(--accent-warm-start);
  --accent-progress-soft:  rgba(var(--accent-warm-start-rgb), 0.70);
  --accent-progress-soft2: rgba(162, 156, 255, 0.55); /* from --accent-warm-end */

  /* NEW: weekly dots theme (can tweak later) */
--weekly-dot-off: rgba(255, 255, 255, 0.20);
--weekly-dot-border: rgba(255, 255, 255, 0.35);
  --weekly-dot-on:        var(--accent-progress);     /* your warm accent */
  --weekly-dot-on-glow:   var(--accent-progress-soft2);

/* === VEHICLE GLOW TOKENS (theme aware) === */
--glow-tier-1: rgba(var(--accent-warm-start-rgb), 0.15);
--glow-tier-2: rgba(var(--accent-warm-start-rgb), 0.25);
--glow-tier-3: rgba(var(--accent-warm-start-rgb), 0.32);
--glow-tier-4: rgba(var(--accent-warm-start-rgb), 0.40);
--glow-tier-5: rgba(var(--accent-warm-start-rgb), 0.50);
--glow-tier-6: rgba(var(--accent-warm-start-rgb), 0.60);
--glow-tier-7: rgba(var(--accent-warm-start-rgb), 0.75);
--glow-tier-8: rgba(var(--accent-warm-start-rgb), 0.85);
--glow-tier-9: rgba(var(--accent-warm-start-rgb), 1.00);


  /* Back-compat gradient aliases */
  --accent:   var(--accent-primary);
  --accent-2: var(--accent-secondary);

  /* Radius */
  --radius-card: 24px;
  --radius-pill: 999px;

  /* Legacy aliases (safe to leave) */
  --bg-dark:  #040405;
  --bg-panel: var(--surface-main);
  --glass:    rgba(255, 255, 255, 0.05);
}





html.no-scroll,
body.no-scroll {
  overflow: hidden;
  height: 100%;
}


html,
body {
  max-width: 100%;
  overflow-x: hidden;
  overscroll-behavior: none;

}

/* ===========================================================
   MOBILE APP RESET ‚Äì put this near the top, after :root
   =========================================================== */

/* 1) Consistent box model */
*, *::before, *::after {
  box-sizing: border-box;
}

/* 2) Kill blue tap highlight on mobile */
* {
  -webkit-tap-highlight-color: transparent;
}

/* 3) Buttons / tappables ‚Äì no default outline or delay */
button,
.btn,
.exercise-name-btn,
[role="button"] {
  outline: none;
  touch-action: manipulation;  /* removes old 300ms tap delay */
}

/* 4) Normalize form controls so only YOUR styles show */
input,
button,
select,
textarea {
  font: inherit;
  color: inherit;
  background: transparent;
  border-radius: 0;
  border: none;
  -webkit-appearance: none;
  -moz-appearance: none;
}


    
body {
    background: radial-gradient(circle at top, var(--bg-top-glow), transparent 55%),
                var(--bg-page);
    color: var(--text-primary);
    font-family: var(--font-main);
}


a {
    color: inherit;
    text-decoration: none;
}

/* Screens ‚Äì JS controls which is visible */
#screen-daily {
    display: none;
    /* first-time visitors see setup */
}

/* =========================
2) LAYOUT: HEADER / NAV
========================= */
header {
    position: sticky;
    top: 0;
    z-index: 10;
    background: rgba(5, 4, 10, 0.9); /* close to --bg-page */
    backdrop-filter: blur(10px);
    border-bottom: 1px solid var(--card-border);
}

nav {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem clamp(1rem, 4vw, 3rem);
}

.logo {
    font-weight: 700;
    letter-spacing: 1px;
    font-size: 1.2rem;
    display: flex;
    align-items: center;
    gap: 0.35rem;
}

.logo span {
    color: var(--accent-yellow);
    font-size: 1.4rem;
}

.nav-links {
    display: flex;
    gap: 1.25rem;
    font-size: 0.95rem;
}

.nav-links a {
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 1px;
    font-size: 0.78rem;
}

/* Right-side nav actions: Setup + Start Today */
.nav-actions {
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.nav-actions .btn {
    padding: 0.55rem 1.25rem;
    font-size: 0.85rem;
}

/* =========================
3) BUTTONS / CONTROLS
========================= */
.btn {
    border: none;
    padding: 0.85rem 1.75rem;
    font-size: 0.95rem;
    font-weight: 600;
    border-radius: 999px;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    border-radius: var(--radius-pill);
}

.btn-primary {
  background-image: linear-gradient(
    135deg,
    var(--accent-primary),
    var(--accent-secondary)
  );
  color: #fff;
  box-shadow: var(--shadow-accent-soft);
}


    
        .btn-outline {
            border: 1px solid var(--card-border);
            color: var(--text-muted);
            background: transparent;
        }
    
        .btn:hover {
            transform: translateY(-3px);
        }
    
        /* Weekly goal day pills (interactive ‚Äì on daily screen) */
        .day-pill {
            border: 1px solid var(--card-border);
            background: transparent;
            color: var(--text-muted);
            padding: 0.5rem 1rem;
            border-radius: 999px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: background 0.2s ease, transform 0.2s ease, border-color 0.2s ease;
        }
    
        .day-pill:hover {
            transform: translateY(-1px);
            border-color: var(--accent);
        }
    
        .day-pill.active {
            background-image: linear-gradient(135deg, var(--accent), var(--accent-2));
            color: #fff;
            border-color: transparent;
        }
    
        /* Weekly goal preview pills (visual-only ‚Äì on setup screen) */
        .day-pill-preview {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.35rem 0.75rem;
            border-radius: 999px;
            border: 1px solid var(--card-border);
            font-size: 0.85rem;
            color: var(--text-muted);
            opacity: 0.85;
            pointer-events: none;
            /* non-interactive */
        }

        .day-pill[disabled] {
            opacity: 0.45;
            cursor: not-allowed;
            filter: grayscale(0.3);
}

    
        /* Bottom bar CTA (mobile only) */
        .bottom-bar {
            position: fixed;
            left: 0;
            right: 0;
            bottom: 0;
            padding: 0.5rem 1rem;
            background: rgba(5, 4, 10, 0.96);
            border-top: 1px solid var(--card-border);
            display: flex;
            justify-content: center;
            z-index: 20;
        }
    
        .bottom-bar-btn {
            width: 100%;
            max-width: 480px;
            justify-content: center;
        }
    
        /* Hide bottom bar on larger screens */
        @media (min-width: 769px) {
            .bottom-bar {
                display: none;
            }
        }
    
        

        /* =========================
       4) MAIN LAYOUT
       ========================= */
        main {
            padding: clamp(2rem, 5vw, 4rem) clamp(1rem, 5vw, 4rem) 6rem;
        }
    
        /* Hero container */
.hero {
    background: linear-gradient(
      145deg,
      var(--accent-warm-soft-start),
      var(--bg-page)
    );
    border: 1px solid var(--card-border);
}

    
        .hero h1 {
            font-size: clamp(2.3rem, 6vw, 3.8rem);
            line-height: 1.1;
            margin-bottom: 1rem;
        }
    
        .hero p {
            color: var(--text-muted);
            max-width: 480px;
        }
    
        /* Setup-specific hero spacing */
        #screen-setup .hero {
            margin-bottom: 2.5rem;
        }
    
        #screen-setup .hero>div {
            max-width: 720px;
        }
    
        #screen-setup .hero p {
            margin-bottom: 0.75rem;
        }
    
        /* Stats row (if used) */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
            margin: 2.5rem 0;
        }
    
        .stat-card {
            padding: 1.25rem;
            border-radius: 1rem;
            background: var(--surface-main);
            border: 1px solid var(--card-border);
            text-align: center;
        }
    
        .stat-card strong {
            display: block;
            font-size: 2rem;
            margin-bottom: 0.25rem;
            color: var(--text-accent);
        }
    
        /* Right hero panel (used on daily screen) */
        .hero-panel {
            background: var(--surface-main);
            border-radius: 1.5rem;
            padding: 2rem;
            border: 1px solid var(--card-border);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.35);
        }
    
        .hero-panel .badge {
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            border-radius: 999px;
            padding: 0.35rem 1rem;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            background: rgba(255, 255, 255, 0.08);
            margin-bottom: 1rem;
        }
    
        /* Sections */
        .section {
            margin-top: clamp(3rem, 7vw, 5rem);
        }
    
        /* Slightly tighter spacing for setup sections */
        #screen-setup .section {
            margin-top: 2.75rem;
        }
    
        .section-head {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.25rem;
            flex-wrap: wrap;
            gap: 1rem;
        }
    
        .section-head h2 {
            margin: 0;
            font-size: clamp(1.6rem, 4vw, 2.45rem);
        }
    .finisher-head {
    align-items: baseline;
    gap: 0.5rem;
}

.finisher-subcopy {
    font-size: 0.85rem;
    color: var(--text-muted);
    max-width: 420px;
}

/* On mobile, stack nicely */
@media (max-width: 768px) {
    .finisher-head {
        flex-direction: column;
        align-items: flex-start;
    }

    .finisher-subcopy {
        max-width: 100%;
    }
}

        /* Weekly goal + install spacing */
        #weekly-goal .workout-card,
        #install .workout-card {
            margin-top: 1rem;
        }
    
        /* Generic grid helper */
        .grid {
            display: grid;
            gap: 1.5rem;
        }
    
        @media (min-width: 768px) {
            .grid-3 {
                grid-template-columns: repeat(3, minmax(0, 1fr));
            }
        }
    
        /* =========================
       5) CARDS / COMPONENTS
       ========================= */
.workout-card {
    background: var(--surface-main);          /* was var(--bg-panel) */
    border-radius: var(--radius-card);       /* unify with modal */
    padding: 1.75rem;
    border: 1px solid var(--card-border);
    display: flex;
    flex-direction: column;
    gap: 1rem;
    box-shadow: var(--shadow-soft);          /* optional, but nice */
}

    
        .workout-card h3 {
            margin: 0;
        }
    
        .workout-card ul {
            list-style: none;
            padding: 0;
            margin: 0;
            color: var(--text-muted);
            font-size: 0.95rem;
        }
    
        /* Intro explainer cards on setup screen */
        .intro-grid {
            display: grid;
            margin-top: 2rem;
            gap: 1.25rem;
        }
    
        @media (min-width: 768px) {
            .intro-grid {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
        }
    
.intro-card {
    min-height: 140px;
    margin: 0;
    opacity: 0;
    transform: translateY(12px);
    animation: fadeUp 4s ease forwards;

    background: var(--surface-subtle);   /* NEW */
    border-radius: var(--radius-card);   /* NEW */
    border: 1px solid var(--card-border);/* NEW */
    padding: 1.25rem;                    /* NEW (if needed) */
}

    
        /* Fade-up animation for intro cards */
        @keyframes fadeUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    /* Day-of-week row under progress text */
.weekly-day-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 0.25rem;
  margin-top: 0.6rem;
  font-size: 0.7rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--text-muted);
}

/* Base pill */
.weekly-day-pill {
  flex: 1;
  text-align: center;
  padding: 0.15rem 0;
  border-radius: 999px;
  border: 1px solid transparent;
  background: transparent;
  opacity: 0.6;
}

/* Day with a completed workout */
.weekly-day-pill--worked {
  background: rgba(var(--accent-warm-start-rgb), 0.22);
  border-color: rgba(var(--accent-warm-start-rgb), 0.55);
  color: var(--text-primary);
  opacity: 1;
}

/* Today (outline) */
.weekly-day-pill--today {
  border-color: rgba(255, 255, 255, 0.45);
}

/* Today AND worked can have a stronger look */
.weekly-day-pill--today.weekly-day-pill--worked {
  box-shadow: 0 0 12px var(--accent-progress-soft2);
}

        /* Title + description inside cards */


.card-title {
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--text-accent);   
    font-size: 1rem;
}

    
.card-desc {
    color: var(--text-muted);
    font-size: 0.9rem;
    margin-top: 0.75rem;
    line-height: 1.45;
}
    
/* ======================================
   WEEKLY DAY DETAIL BOTTOM SHEET
   ====================================== */

.weekly-day-sheet-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.55);
  backdrop-filter: blur(10px);
  display: flex;
  justify-content: center;
  align-items: flex-end;
  z-index: 999;
}

.weekly-day-sheet {
  width: 100%;
  max-width: 520px;
  background: radial-gradient(circle at top, rgba(120, 120, 255, 0.18), transparent 65%),
              var(--surface-main);
  border-radius: 18px 18px 0 0;
  border-top: 1px solid var(--card-border);
  border-left: 1px solid var(--card-border);
  border-right: 1px solid var(--card-border);
  box-shadow: var(--shadow-medium);
  padding: 1rem 1.1rem 1.35rem;
  animation: weeklyDaySheetSlideUp 0.28s ease-out;
}

/* little grab handle at the top */
.weekly-day-sheet-handle {
  width: 44px;
  height: 4px;
  border-radius: 999px;
  background: rgba(148, 163, 184, 0.45);
  margin: 0 auto 0.75rem auto;
}

/* Header "Wednesday" and date line */
.weekly-day-sheet-header {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  gap: 0.75rem;
  margin-bottom: 0.35rem;
}

.weekly-day-sheet-title {
  font-size: 0.95rem;
  text-transform: uppercase;
  letter-spacing: 0.14em;
  color: var(--text-accent);
}

.weekly-day-sheet-date {
  font-size: 0.8rem;
  color: var(--text-muted);
}

.weekly-day-sheet-status {
  font-size: 0.95rem;
  margin-top: 0.4rem;
  color: var(--text-primary);
}

.weekly-day-sheet-sub {
  font-size: 0.85rem;
  margin-top: 0.25rem;
  color: var(--text-muted);
}

.weekly-day-sheet-footer {
  display: flex;
  justify-content: flex-end;
  margin-top: 0.85rem;
}

/* Close button that still feels on-theme */
.weekly-day-sheet-close {
  border-radius: var(--radius-pill);
  padding: 0.4rem 0.9rem;
  border: 1px solid var(--card-border);
  background: var(--surface-subtle);
  color: var(--text-primary);
  font-size: 0.85rem;
  cursor: pointer;
}

/* Slide-up animation */
@keyframes weeklyDaySheetSlideUp {
  from {
    transform: translateY(18px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}



/* Week 1 */
.emblem-weekly-1::before,
.emblem-weekly-2::before,
.emblem-weekly-3::before {
  background:
    radial-gradient(circle,
      var(--aura-soft),
      transparent 70%);
}

@keyframes emblem-shimmer {
    0% { filter: blur(12px) brightness(1); }
    50% { filter: blur(18px) brightness(1.4); }
    100% { filter: blur(12px) brightness(1); }
}

/* Month 1 */
.emblem-monthly-1::before,
.emblem-monthly-2::before,
.emblem-monthly-3::before {
  background:
    radial-gradient(circle,
      var(--aura-strong),
      transparent 70%);
}

@keyframes emblem-quarter-pulse {
    0%   { filter: blur(20px) brightness(1.1); }
    50%  { filter: blur(26px) brightness(1.55); }
    100% { filter: blur(20px) brightness(1.1); }
}

.emblem-quarterly-1::before {
  background: radial-gradient(circle, var(--streak-quarter-aura-1), transparent 70%);
  opacity: 1;
  animation: emblem-quarter-pulse 2.4s ease-in-out infinite;
}

.emblem-quarterly-2::before {
  background: radial-gradient(circle, var(--streak-quarter-aura-1), transparent 70%);
  opacity: 1;
  animation: emblem-quarter-pulse 2s ease-in-out infinite;
}

.emblem-quarterly-3::before {
  background: radial-gradient(circle, var(--streak-quarter-aura-1), transparent 70%);
  opacity: 1;
  animation: emblem-quarter-pulse 1.7s ease-in-out infinite;
}

/* Annual ‚Äì lava flow, but via tokens */
@keyframes emblem-annual-burn {
  0%   { filter: blur(24px) brightness(1);   transform: scale(1); }
  50%  { filter: blur(32px) brightness(1.7); transform: scale(1.03); }
  100% { filter: blur(24px) brightness(1);   transform: scale(1); }
}

.emblem-annual-1::before,
.emblem-annual-2::before {
  background: radial-gradient(circle, var(--streak-annual-lava-2), transparent 72%);
  opacity: 1;
  animation: emblem-annual-burn 1.8s ease-in-out infinite;
}

/* Legendary ‚Äì keep ‚Äúwhite hot‚Äù but drive lava via tokens */
@keyframes emblem-legendary-flare {
  0%   { filter: blur(28px) brightness(1)   hue-rotate(0deg); }
  50%  { filter: blur(40px) brightness(2)   hue-rotate(25deg); }
  100% { filter: blur(28px) brightness(1)   hue-rotate(0deg); }
}

.emblem-legendary-1::before {
  background:
    radial-gradient(circle, rgba(255,255,255,0.85), transparent 55%),
    radial-gradient(circle, var(--streak-annual-lava-3), transparent 80%);
  opacity: 1;
  animation: emblem-legendary-flare 1.2s ease-in-out infinite;
}

/* DEBUG Legendary streak background ‚Äì still fine to be loud */
.emblem-legendary-1 .streak-bg-layer {
  background-image:
    repeating-linear-gradient(
      45deg,
      rgba(255, 255, 255, 0.3),
      rgba(255, 255, 255, 0.3) 4px,
      var(--streak-annual-lava-3) 4px,
      var(--streak-annual-lava-3) 8px
    ),
    radial-gradient(circle at center,
      rgba(0, 0, 0, 0.75) 0%,
      rgba(0, 0, 0, 0.5) 40%,
      transparent 70%);
  background-size: 40px 40px, auto;
}

/* =========================
   STREAK POWERUP (BANNER BLAST)
   ========================= */

@keyframes streakPowerShell {
  0% {
    transform: scale(1);
    box-shadow: 0 0 0 0 rgba(0, 0, 0, 0);
  }
  40% {
    transform: scale(1.03);
    box-shadow:
      0 0 42px 0 var(--shadow-progress-strong);
  }
  80% {
    transform: scale(1.01);
    box-shadow:
      0 0 26px 0 var(--shadow-progress);
  }
  100% {
    transform: scale(1);
    box-shadow: 0 0 16px 0 var(--shadow-progress);
  }
}

@keyframes streakPowerRays {
  0% {
    transform: scale(0.9) rotate(0deg);
    opacity: 0;
  }
  30% {
    opacity: 1;
  }
  100% {
    transform: scale(1.18) rotate(40deg);
    opacity: 0;
  }
}

.streak-emblem-wrapper {
  flex-shrink: 0;
}

.streak-emblem.rankup-emblem-preview {
  width: 40px;
  height: 40px;
  border-radius: 12px;
  background: radial-gradient(circle, rgba(255, 255, 255, 0.08), rgba(0, 0, 0, 0.9));
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  box-shadow: var(--shadow-progress-strong);
}
.streak-emblem {
  border: 1px solid rgba(255, 255, 255, 0.18);
  box-shadow: 0 0 12px rgba(0, 0, 0, 0.8);
  overflow: hidden;
}

/* 1‚Äì3 weeks: dull steel plate */
.streak-emblem.emblem-weekly-1,
.streak-emblem.emblem-weekly-2,
.streak-emblem.emblem-weekly-3 {
  background:
    radial-gradient(circle at 30% 15%, rgba(255,255,255,0.18), rgba(40,40,48,1)),
    linear-gradient(145deg, #121319, #050509);
}

/* 1‚Äì3 months: reinforced shield, brighter rim (glow now uses streak-hot token) */
.streak-emblem.emblem-monthly-1,
.streak-emblem.emblem-monthly-2,
.streak-emblem.emblem-monthly-3 {
  background:
    radial-gradient(circle at 30% 15%, rgba(255,255,255,0.22), rgba(40,40,48,1)),
    linear-gradient(145deg, #20222e, #0a0b10);
  box-shadow:
    0 0 14px var(--streak-hot-glow),
    0 0 24px rgba(0, 0, 0, 0.8);
}

/* 4‚Äì9 months: reaper-ish aggressive metal */
.streak-emblem.emblem-quarterly-1,
.streak-emblem.emblem-quarterly-2,
.streak-emblem.emblem-quarterly-3 {
  background:
    radial-gradient(circle at 30% 15%, rgba(255,255,255,0.24), rgba(30,30,40,1)),
    linear-gradient(150deg, #3b1d1f, #060309);
  box-shadow:
    0 0 18px var(--streak-hot-glow),
    0 0 30px rgba(0, 0, 0, 0.9);
}

/* 1‚Äì2 years: molten skull shield */
.streak-emblem.emblem-annual-1,
.streak-emblem.emblem-annual-2 {
  background:
    radial-gradient(circle at 25% 20%, rgba(255,255,255,0.3), rgba(40,10,10,1)),
    linear-gradient(150deg, #5b1b16, #0a0202);
  box-shadow:
    0 0 20px var(--streak-hot-glow),
    0 0 36px rgba(0, 0, 0, 1);
}

/* 2+ years: legendary ‚Äì cracked lava skull */
.streak-emblem.emblem-legendary-1,
.streak-emblem.emblem-legendary-2,
.streak-emblem.emblem-legendary-3 {
  background:
    radial-gradient(circle at 25% 20%, rgba(255,255,255,0.36), rgba(50,10,0,1)),
    linear-gradient(140deg, #7a1300, #ff6a00, #f6c343);
  box-shadow:
    0 0 26px var(--streak-hot-glow),
    0 0 50px rgba(0, 0, 0, 0.9);
}

.streak-emblem-icon {
  font-size: 1.4rem;
  position: relative;
  z-index: 1;
}


.streak-banner.streak-powerup::after {
  content: "";
  position: absolute;
  inset: -12px;
  border-radius: 999px;
  background:
    conic-gradient(
      from 0deg,
      rgba(255, 255, 255, 0.22),
      var(--streak-reactive-amber-3),
      rgba(255, 255, 255, 0.0),
      rgba(255, 255, 255, 0.22)
    );
  mix-blend-mode: screen;
  pointer-events: none;
  animation: streakPowerRays 0.9s ease-out forwards;
  z-index: -1;
}

/* Banner ‚Äúpowerup‚Äù shell (when streak jumps tier) */
.streak-banner.streak-powerup {
  animation: streakPowerShell 0.8s ease-out;
  position: relative;
}

.streak-banner.streak-powerup::after {
  content: "";
  position: absolute;
  inset: -12px;
  border-radius: 999px;
  background:
    conic-gradient(
      from 0deg,
      rgba(255, 255, 255, 0.22),
      var(--streak-reactive-amber-3),
      rgba(255, 255, 255, 0.0),
      rgba(255, 255, 255, 0.22)
    );
  mix-blend-mode: screen;
  pointer-events: none;
  animation: streakPowerRays 0.9s ease-out forwards;
  z-index: -1;
}


/* we reuse the emblem aura classes here too */
.rankup-emblem-preview.emblem-weekly-1::before,
.rankup-emblem-preview.emblem-weekly-2::before,
.rankup-emblem-preview.emblem-weekly-3::before,
.rankup-emblem-preview.emblem-monthly-1::before,
.rankup-emblem-preview.emblem-monthly-2::before,
.rankup-emblem-preview.emblem-monthly-3::before,
.rankup-emblem-preview.emblem-quarterly-1::before,
.rankup-emblem-preview.emblem-quarterly-2::before,
.rankup-emblem-preview.emblem-quarterly-3::before,
.rankup-emblem-preview.emblem-annual-1::before,
.rankup-emblem-preview.emblem-annual-2::before,
.rankup-emblem-preview.emblem-legendary-1::before {
    content: "";
    position: absolute;
    inset: -6px;
    border-radius: inherit;
    z-index: -1;
}

/* reuse your existing emblem gradients by classnames:
   .emblem-weekly-1::before, etc. will also apply here */

.rankup-icon {
    font-size: 2.2rem;
    position: relative;
    z-index: 1;
}

.rankup-inner h2 {
    font-size: 1.35rem;
    margin-bottom: 0.5rem;
    color: var(--text-primary, #fff);
}

.rankup-inner p {
    font-size: 0.98rem;
    margin-bottom: 1.25rem;
    color: var(--text-muted, #cfcfd6);
}


/* Base streak banner */
.streak-banner {
  position: relative;
  margin-bottom: 1rem;
  padding: 0.75rem 1rem;
  border-radius: 18px;

  /* ‚úÖ Now fully theme-driven */
  background: linear-gradient(
    135deg,
    var(--streak-grad-start),
    var(--streak-grad-end)
  );

  border: 1px solid var(--card-border);
  font-size: 0.85rem;
  display: flex;
  align-items: center;
  gap: 0.75rem;
  flex-wrap: wrap;
  color: var(--text-primary);
  overflow: hidden;
  --emblem-strength: 0;
}


/* keep real content above FX layer */
.streak-banner > *:not(.streak-bg-layer) {
  position: relative;
  z-index: 1;
}


/* One background layer that we re-skin per tier */
.streak-bg-layer {
    position: absolute;
    inset: 0;
    z-index: 0;                /* ‚úÖ above banner background, below content */
    pointer-events: none;

    /* Darker in the center so text stays readable */
    background:
        radial-gradient(
            circle at center,
            rgba(0, 0, 0, 0.65) 0%,
            rgba(0, 0, 0, 0.35) 40%,
            transparent 70%
        );
    mix-blend-mode: screen;
}


/* keep these helpers from before */
.streak-banner-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

#streak-text {
    white-space: normal;
    flex: 1;
}
.streak-subline {
    opacity: 0.9;
    font-size: 0.9em;
}

.streak-banner span {
    font-weight: 500;
}

/* Layout rows inside the banner */
.streak-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.5rem;
}

/* Top row: keep chips on one line on larger screens, allow wrap on small */
.streak-row-top {
    flex-wrap: wrap;
}
.streak-pill-emblem {
    border-color: rgba(255, 255, 255, 0.35);
    color: #ffe8b0;
    background: rgba(0, 0, 0, 0.55);
}

/* Little stat chips for week + tokens */

.streak-pill {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    padding: 0.2rem 0.7rem;
    border-radius: 999px;
    border: 1px solid rgba(255, 255, 255, 0.18);
    background: rgba(0, 0, 0, 0.35);
    color: rgba(255, 255, 255, 0.9);
    white-space: nowrap;
}

.streak-pill-secondary {
    border-color: rgba(246, 195, 67, 0.6);
    color: #f6c343;
}

/* Short progress text */
.streak-progress-label {
    font-size: 0.8rem;
    color: var(--text-muted, rgba(245, 247, 255, 0.7));
}

.streak-icon {
    font-size: 1.4rem;
    flex-shrink: 0;
}


.streak-progress {
  margin-top: 0.35rem;
  width: 100%;
  height: 0.4rem;
  border-radius: 999px;
  background: var(--streak-progress-bg);
  overflow: hidden;
}

.streak-progress-fill {
  height: 100%;
  width: 0;
  border-radius: inherit;
  background: var(--streak-progress-fill);
  box-shadow: var(--shadow-progress);
  transition: width 0.35s ease-out;
}




    
        /* =========================
       6) FOOTER
       ========================= */
footer {
    padding: 2rem clamp(1rem, 5vw, 4rem) 3rem;
    text-align: center;
    color: var(--text-muted);
    border-top: 1px solid var(--card-border);
    background:
        radial-gradient(circle at top, var(--accent-warm-soft-start), transparent 55%),
        var(--bg-page);
}

    
        /* =========================
       7) UTILITIES
       ========================= */
        .hidden {
            display: none;
        }
    
#exercise-list li {
    padding: 0.6rem 0.75rem;
    border-radius: 0.9rem;
    background: transparent; /* sits on surface-main card */
    transition: background 0.15s ease, transform 0.15s ease;
}

#exercise-list li:hover {
    background: var(--surface-subtle); /* uses our sub-surface */
    transform: translateY(-1px);
}



#exercise-list input[type="checkbox"]:checked+span {
    text-decoration: line-through;
    opacity: 0.7;
    transform: translateX(2px);
}
    
        /* =========================
       8) RESPONSIVE (MOBILE)
       ========================= */
        @media (max-width: 768px) {
            body {
                line-height: 1.5;
            }
    
            main {
                padding: 1.5rem 1rem 3rem;
            }
    
            /* Nav stacks nicely */
            nav {
                flex-direction: column;
                gap: 0.75rem;
                align-items: flex-start;
            }
    
            .nav-links {
                width: 100%;
                justify-content: flex-start;
                flex-wrap: wrap;
                gap: 0.75rem;
                font-size: 0.75rem;
            }
    
            /* Hero stacks into one column */
            .hero {
                grid-template-columns: 1fr;
                padding: 1.75rem 1.25rem;
                text-align: left;
            }
    
            .hero h1 {
                font-size: 1.9rem;
            }
    
            .hero p {
                max-width: 100%;
            }
    
            .stats {
                margin: 1.5rem 0;
            }
    
            /* Make buttons easier to tap */
            .hero .btn {
                width: 100%;
                justify-content: center;
            }
    
            /* Sections closer together on mobile */
            .section {
                margin-top: 2.25rem;
            }
    
            .section-head {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }
    
            .workout-card,
            .motivation-card,
            .cta {
                padding: 1.5rem 1.25rem;
                border-radius: 1.25rem;
                margin-top: 0.5rem;
                margin-bottom: 0.5rem;
            }
    
            .quote {
                font-size: 1.25rem;
            }
        }
.weight-row {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-left: 1.8rem; /* lines it up nicely under the checkbox text */
    margin-top: 0.25rem;
    font-size: 0.85rem;
    color: var(--text-muted);
}

.weight-row input[type="number"] {
    width: 5rem;
    padding: 0.25rem 0.4rem;
    border-radius: 0.5rem;
    border: 1px solid var(--card-border);
    background: var(--surface-subtle); /* was var(--bg-panel) */
    color: var(--text-primary);
    font-size: 0.85rem;
}


/* --- Toast notifications --- */
.toast-container {
    position: fixed;
    left: 50%;
    bottom: 5rem;
    transform: translateX(-50%);
    z-index: 40;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    align-items: center;
}

.toast {
    background: var(--surface-main);      /* was rgba(16, 18, 25, 0.95) */
    border-radius: 18px;
    padding: 0.6rem 1.1rem;
    border: 1px solid var(--card-border);
    font-size: 0.85rem;

    white-space: normal;
    max-width: min(90vw, 320px);
    overflow-wrap: anywhere;

    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;

    box-shadow: var(--shadow-soft);       /* NEW ‚Äì matches cards */
    animation: toast-in .8s ease-out forwards;
}




@keyframes toast-in {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes toast-out {
    from {
        opacity: 1;
        transform: translateY(0);
    }
    to {
        opacity: 0;
        transform: translateY(6px);
    }
}


/* --- Daily completion halo on Today's Split card --- */
/* --- Daily completion halo on Today's Split card (theme-aware) --- */
.day-complete-boost {
  position: relative;
  animation: animeBlast 1.6s ease-out;
  overflow: visible; /* let glow spill slightly */
}

/* Main pulse on the card itself */
@keyframes animeBlast {
  0% {
    transform: scale(0.97);
    box-shadow: 0 0 0 0 rgba(0, 0, 0, 0);
    filter: brightness(0.9);
  }
  /* Impact flash */
  12% {
    transform: scale(1.06);
    box-shadow:
      0 0 20px var(--accent-progress-soft),
      0 0 40px var(--aura-soft),
      0 0 80px var(--aura-strong);
    filter: brightness(1.3);
  }
  /* Energy surge */
  30% {
    transform: scale(1.03) translateY(-2px);
    box-shadow:
      0 0 26px var(--accent-progress-soft),
      0 0 70px var(--aura-strong),
      0 0 110px var(--aura-soft);
    filter: brightness(1.15);
  }
  /* Lingering aura */
  60% {
    transform: scale(1.01) translateY(-1px);
    box-shadow:
      0 0 18px var(--accent-progress-soft2),
      0 0 40px var(--aura-soft);
    filter: brightness(1.05);
  }
  /* Fade out */
  100% {
    transform: scale(1) translateY(0);
    box-shadow: 0 0 0 rgba(0, 0, 0, 0);
    filter: brightness(1);
  }
}

/* Two glow layers anchored to the card */
.day-complete-boost::before,
.day-complete-boost::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
}


.day-complete-boost::before {
  inset: -14px;
  border-radius: inherit;

  border: 4px solid var(--aura-strong);

  box-shadow:
    0 0 40px var(--aura-strong),
    0 0 110px var(--accent-progress-soft2),
    0 0 160px var(--aura-strong);

  background: radial-gradient(
    circle,
    var(--aura-strong),
    transparent 85%
  );

  opacity: 0;
  transform: scale(0.7);
  animation: animeRing 1.2s ease-out forwards;
}




.day-complete-boost::after {
  content: "";
  position: absolute;
  inset: -22px;
  border-radius: inherit;
  border: 3px solid var(--aura-soft);
  opacity: 0;
  transform: scale(0.9);
  animation: animeRing 1.8s ease-out 0.15s forwards;
}

@keyframes animeRing {
  0% {
    opacity: 0.9;
    transform: scale(0.75);
  }
  60% {
    opacity: 0.45;
    transform: scale(1.15);
  }
  100% {
    opacity: 0;
    transform: scale(1.4);
  }
}

@keyframes animeFlash {
  0% {
    opacity: 0.95;
    transform: scale(0.7);
  }
  40% {
    opacity: 0.8;
    transform: scale(1);
  }
  100% {
    opacity: 0;
    transform: scale(1.05);
  }
}


/* Exercise name inside the daily split card */
/* Container row for checkbox + content already handled by your li/label styles */

/* Clickable exercise title */
/* Clickable exercise title in Today's Split card */

/* Tap feedback (for mobile) */
.exercise-name-btn:active {
  transform: scale(0.98) translateY(1px);
  text-decoration-color: var(--text-accent); /* was var(--accent-yellow) */
  color: var(--text-accent);
}

.exercise-name.focus-link {
  font-weight: 600;
  text-decoration: underline;
  text-underline-offset: 0.17em;
  text-decoration-thickness: 1px;
  background: none;
  border: 0;
  padding: 0;
  color: var(--text-primary); /* was #fff */
}

/* Tiny ‚ÄúFOCUS‚Äù tag next to the name */
.exercise-focus-tag {
  font-size: 0.78rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  margin-left: 0.35rem;
  color: var(--text-accent);  /* was var(--accent-yellow) */
  opacity: 0.9;
}

.exercise-name.focus-link:active {
  transform: scale(0.97);
}


/* --- Finisher card micro-pop --- */
.finisher-celebrate {
    animation: finisher-pop 0.5s ease-out;
}

@keyframes finisher-pop {
    0% {
        transform: scale(1);
    }
    35% {
        transform: scale(1.05);
    }
    100% {
        transform: scale(1);
    }
}


/* Weekly goal celebration overlay */
.weekly-overlay.focus-volume-sanity {
  z-index: 9999;
}
.weekly-overlay {
    position: fixed;
    inset: 0;
    background:
        radial-gradient(circle at top, var(--accent-warm-soft-start), transparent 55%),
        rgba(0, 0, 0, 0.88);  /* keeps the nice contrast */
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9500;
    animation: overlay-in 0.35s ease-out forwards;
}

.weekly-overlay-card {
    padding: 1.75rem 2rem;
    border-radius: var(--radius-card);        /* unify with other cards */
    background: var(--surface-main);          /* was rgba(4, 4, 5, 0.95) */
    border: 1px solid var(--card-border);
    text-align: center;
    max-width: 320px;
    box-shadow: var(--shadow-soft);           /* matches modal vibe */
}


.weekly-overlay-card h2 {
    margin: 0 0 0.5rem;
    font-size: 1.5rem;
}

.weekly-overlay-card p {
    margin: 0 0 1.25rem;
    color: var(--text-muted);
    font-size: 0.9rem;
}

@keyframes overlay-in {
    from {
        opacity: 0;
        transform: scale(0.96);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}



@keyframes finisherPulse {
    0% {
        box-shadow: 0 0 0 0 rgba(246, 195, 67, 0.7);
    }
    100% {
        box-shadow: 0 0 0 16px rgba(246, 195, 67, 0);
    }
}
/* =============================
   ENCOUNTER OVERLAY BASE
   ============================= */

#encounter-overlay.encounter-overlay {
  position: fixed;
  inset: 0;
  z-index: 999;
  background: radial-gradient(circle at top, rgba(0, 0, 0, 0.8), #020204);
  backdrop-filter: blur(12px);
  display: flex;
  justify-content: center;
  align-items: center;
}

.encounter-stage {
  width: min(480px, 100% - 2.5rem);
  max-width: 480px;
  aspect-ratio: 16/14;
  border-radius: 18px;
  background: radial-gradient(circle at top, rgba(120, 120, 255, 0.22), transparent 65%),
              var(--surface-main);
  border: 1px solid var(--card-border);
  box-shadow: var(--shadow-medium);
  padding: 1rem 1.25rem;
  display: grid;
  grid-template-rows: 1fr auto;
  gap: 0.75rem;
  position: relative;
  overflow: hidden;
}

/* top area: weapon + target */
/* Weapon: left side */




/* UI bottom strip */
.encounter-ui {
  position: relative;
  z-index: 2;
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  gap: 1rem;
}

.encounter-bars {
  flex: 1;
  font-size: 0.8rem;
}

.encounter-bar-label {
  color: var(--text-muted);
  margin-bottom: 0.25rem;
}

.encounter-bar-outer {
  width: 100%;
  height: 6px;
  border-radius: 999px;
  background: rgba(148, 163, 184, 0.35);
  overflow: hidden;
  margin-bottom: 0.5rem;
}

.encounter-bar-inner {
  height: 100%;
  width: 100%;
  border-radius: inherit;
  background: linear-gradient(
    90deg,
    var(--accent-warm-start),
    var(--accent-warm-end)
  );
  transition: width 0.2s ease-out;
}

.encounter-turns {
  color: var(--text-primary);
  opacity: 0.85;
}

.encounter-actions {
  display: flex;
  flex-direction: column;
  gap: 0.35rem;
}

.encounter-actions .btn {
  font-size: 0.85rem;
  padding-inline: 0.8rem;
  padding-block: 0.4rem;
}

/* RAW ‚Äì almost no glow */
[data-weapon-tier="raw"] .encounter-weapon {
  filter: grayscale(0.2) brightness(0.7);
  box-shadow: none;
}

/* TEMPERED 1 */
[data-weapon-tier="tempered1"] .encounter-weapon {
  filter: grayscale(0) brightness(0.9);

}

/* TEMPERED 2 */
[data-weapon-tier="tempered2"] .encounter-weapon {
  filter: brightness(1.0);

}

/* FORGED */
[data-weapon-tier="forged"] .encounter-weapon {
  filter: brightness(1.08);

}

/* OVERCHARGED */
[data-weapon-tier="overcharged"] .encounter-weapon {
  filter: brightness(1.18);
  transform: translateY(-2px);
}


@keyframes encounterHammerSwing {
  0% {
    transform: rotate(0deg) translateY(0);
  }
  25% {
    transform: rotate(-18deg) translateY(-2px);
  }
  55% {
    transform: rotate(6deg) translateY(1px);
  }
  100% {
    transform: rotate(0deg) translateY(0);
  }
}



.encounter-intro-gate {
  animation: encounterIntroGate 0.35s ease-out;
}
.encounter-intro-boss {
  animation: encounterIntroBoss 0.42s ease-out;
}
.encounter-hit-gate,
.encounter-hit-boss {
  animation: encounterHit 0.22s ease-out;
}
.encounter-defeat-gate,
.encounter-defeat-boss {
  animation: encounterDefeat 0.45s ease-in forwards;
}

/* Gate: weeks 1‚Äì3 */
.encounter-gate-default .encounter-target {
  background-image: url("icons/assets/encounter/Gate1.png");
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}




/* Base layout for the target side (gate / boss) */
.encounter-target {
  position: absolute;
  right: 8%;
  bottom: 16%;
  width: 40%;
  height: 68%;
  pointer-events: none;
  z-index: 0;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center right;
}

/* GATE SKIN (weeks 1‚Äì3) */


/* inner frame + soft glow */
.encounter-gate-default .encounter-target::before {
  content: "";
  position: absolute;
  inset: 10%;
  border-radius: inherit;
  border: 1px solid rgba(148, 163, 184, 0.35);
  box-shadow: 0 0 12px rgba(var(--accent-2-rgb), 0.35) inset;
  background:
    radial-gradient(circle at top,
      rgba(var(--accent-rgb), 0.16),
      transparent 70%
    );
  opacity: 0.9;
}
/* small crack overlay */
.encounter-gate-default .encounter-target::after {
  content: "";
  position: absolute;
  inset: 10%;
  border-radius: inherit;
  pointer-events: none;
  background:
    linear-gradient(
      120deg,
      transparent 30%,
      rgba(var(--accent-2-rgb), 0.85) 35%,
      transparent 40%,
      transparent 55%,
      rgba(var(--accent-2-rgb), 0.7) 60%,
      transparent 65%
    );
  opacity: 0;               /* start invisible */
  transform: scale(1.02);
  transition:
    opacity 0.22s ease-out,
    filter 0.22s ease-out;
}

/* Damaged gate art */
.encounter-gate-damaged .encounter-target {
  background-image: url("icons/assets/encounter/Gate1_damaged.png");
}

/* Critical gate art */
.encounter-gate-critical .encounter-target {
  background-image: url("icons/assets/encounter/Gate1_critical.png");
}


/* =============================
   BOSS SKIN ‚Äì "Pulse Guardian" Shadow Knight
   ============================= */

/* reuse base .encounter-target positioning (right side) */

/* Boss: Pulse Guardian ‚Äì placeholder silhouette */
.encounter-boss-pulse-guardian .encounter-target {
  background-image: none;
  position: absolute;
  right: 8%;
  bottom: 8%;
  width: 40%;
  height: 80%;

  border-radius: 26px;
  overflow: visible;
}


/* Boss body (torso + shoulders) */
.encounter-boss-pulse-guardian .encounter-target::before {
  content: "";
  position: absolute;
  inset: 6% 16% 22% 4%; /* left / right / bottom / top-ish */
  border-radius: 45% 45% 32% 32%;
  background:
    radial-gradient(circle at 50% 20%, rgba(255, 255, 255, 0.22), transparent 55%),
    radial-gradient(circle at 50% 40%, rgba(var(--accent-2-rgb), 0.88), transparent 60%),
    radial-gradient(circle at 50% 100%, rgba(var(--accent-rgb), 0.96), transparent 65%);
  box-shadow:
    0 0 22px rgba(0, 0, 0, 0.95),
    0 0 18px rgba(var(--accent-2-rgb), 0.65);
  opacity: 0.95;
  animation: bossIdleFloat 2.2s ease-in-out infinite alternate;
}

/* Boss "sword" silhouette down the right side */
.encounter-boss-pulse-guardian .encounter-target::after {
  content: "";
  position: absolute;
  right: -6%;
  bottom: 4%;
  width: 24%;
  height: 72%;
  border-radius: 999px;
  background:
    linear-gradient(
      180deg,
      rgba(var(--accent-2-rgb), 0.95),
      rgba(var(--accent-rgb), 0.75),
      rgba(10, 10, 25, 0.9)
    );
  box-shadow:
    0 0 18px rgba(var(--accent-2-rgb), 0.75),
    0 0 30px rgba(0, 0, 0, 0.95);
  opacity: 0.9;
}

/* Idle floating / breathing effect */
@keyframes bossIdleFloat {
  0% {
    transform: translateY(0);
    filter: brightness(1);
  }
  100% {
    transform: translateY(-4px);
    filter: brightness(1.05);
  }
}
/* Boss damaged / critical visual states */
.encounter-boss-damaged .encounter-target::before {
  box-shadow:
    0 0 26px rgba(0, 0, 0, 0.96),
    0 0 26px rgba(var(--accent-2-rgb), 0.85);
  filter: brightness(1.1);
}

.encounter-boss-critical .encounter-target::before {
  box-shadow:
    0 0 30px rgba(0, 0, 0, 0.98),
    0 0 34px rgba(var(--accent-2-rgb), 0.95);
  filter: brightness(1.18);
}

.encounter-boss-critical .encounter-target::after {
  box-shadow:
    0 0 26px rgba(var(--accent-2-rgb), 0.95),
    0 0 40px rgba(var(--accent-2-rgb), 0.9);
}

/* Weekly focus card base (you already have workout-card) */
.weekly-focus-card {
  position: relative;
  overflow: hidden;
}
/* =============================
   ENCOUNTER CUT-IN (RPG STYLE)
   ============================= */
/* ================================
   WEEKLY TRIAL CUT-IN (intro card)
   ================================ */

.encounter-cutin-overlay {
  position: fixed;
  inset: 0;
  z-index: 1300;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1.75rem;
  background:
    radial-gradient(circle at top, rgba(var(--accent-rgb), 0.22), rgba(0, 0, 0, 0.96));
  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);
  animation: cutin-backdrop-in 280ms ease-out forwards;
}

/* Core card ‚Äì ‚Äúbattle intro‚Äù panel */
.encounter-cutin-card {
  position: relative;
  max-width: 460px;
  width: 100%;
  border-radius: var(--radius-card);
  padding: 1.5rem 1.6rem 1.35rem;
  background:
    radial-gradient(circle at top left, rgba(var(--accent-2-rgb), 0.16), transparent 55%),
    radial-gradient(circle at bottom right, rgba(var(--accent-rgb), 0.24), transparent 60%),
    var(--surface-main);
  box-shadow:
    0 22px 55px rgba(0, 0, 0, 0.9),
    0 0 40px rgba(var(--accent-rgb), 0.35);
  border: 1px solid rgba(162, 156, 255, 0.28);
  overflow: hidden;

  transform-origin: bottom center;
  transform: translateY(32px) scale(0.96);
  opacity: 0;
  animation: cutin-card-pop-in 380ms cubic-bezier(0.23, 0.9, 0.25, 1.2) forwards;
}

/* Slightly different tint for boss vs gate */
.cutin-gate {
  background:
    radial-gradient(circle at top left, rgba(var(--accent-rgb), 0.18), transparent 55%),
    radial-gradient(circle at bottom right, rgba(10, 200, 255, 0.20), transparent 60%),
    var(--surface-main);
}

.cutin-boss {
  background:
    radial-gradient(circle at top left, rgba(255, 77, 169, 0.26), transparent 55%),
    radial-gradient(circle at bottom right, rgba(var(--accent-rgb), 0.32), transparent 60%),
    var(--surface-main);
}

/* Glow band behind the header ‚Äì Pokemon style swipe */
.encounter-cutin-card::before {
  content: "";
  position: absolute;
  inset: -40%;
  background:
    linear-gradient(
      120deg,
      rgba(var(--accent-rgb), 0.0) 0%,
      rgba(var(--accent-rgb), 0.55) 45%,
      rgba(255, 255, 255, 0.25) 52%,
      rgba(var(--accent-2-rgb), 0.6) 60%,
      rgba(var(--accent-rgb), 0.0) 100%
    );
  opacity: 0.0;
  transform: translateX(-40%);
  pointer-events: none;
  mix-blend-mode: screen;
  animation: cutin-swipe 700ms 220ms ease-out forwards;
}

/* Header section */
.cutin-header {
  display: flex;
  flex-direction: column;
  gap: 0.4rem;
  margin-bottom: 0.75rem;
}

.cutin-pill {
  align-self: flex-start;
  padding: 0.25rem 0.7rem;
  border-radius: 999px;
  font-size: 0.7rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: #f9f9ff;
  background:
    linear-gradient(135deg, rgba(var(--accent-rgb), 0.9), rgba(var(--accent-2-rgb), 0.9));
  box-shadow: 0 0 16px rgba(var(--accent-2-rgb), 0.8);
}

.cutin-title {
  margin: 0;
  font-size: 1.4rem;
  letter-spacing: 0.02em;
  color: var(--text-primary);
}

/* Subtitle copy */
.cutin-subtitle {
  margin: 0;
  margin-bottom: 1.1rem;
  color: var(--text-muted);
  font-size: 0.95rem;
  line-height: 1.5;
}

/* Actions row */
.cutin-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 0.6rem;
  margin-top: 0.25rem;
}

.cutin-actions .btn {
  flex-shrink: 0;
}

.cutin-actions .btn.btn-primary {
  min-width: 9rem;
}

.cutin-actions .btn.btn-outline {
  border-color: rgba(162, 156, 255, 0.6);
}

/* ‚ÄúSkip this week‚Äù tiny link */
.cutin-skip {
  border: none;
  background: transparent;
  color: rgba(200, 200, 220, 0.6);
  font-size: 0.8rem;
  margin-left: auto;
  padding: 0.1rem 0;
  text-decoration: underline;
  text-underline-offset: 3px;
}

/* Small screens: full width card */
@media (max-width: 480px) {
  .encounter-cutin-card {
    max-width: 100%;
    padding: 1.25rem 1.2rem 1.1rem;
  }

  .cutin-title {
    font-size: 1.25rem;
  }

  .cutin-actions {
    flex-direction: column;
    align-items: stretch;
  }

  .cutin-skip {
    align-self: center;
    margin-left: 0;
  }
}

/* == Animations == */

@keyframes cutin-backdrop-in {
  from {
    opacity: 0;
    backdrop-filter: blur(0px);
  }
  to {
    opacity: 1;
    backdrop-filter: blur(18px);
  }
}

@keyframes cutin-card-pop-in {
  0% {
    opacity: 0;
    transform: translateY(36px) scale(0.92);
  }
  60% {
    opacity: 1;
    transform: translateY(0px) scale(1.01);
  }
  100% {
    opacity: 1;
    transform: translateY(0px) scale(1.0);
  }
}

@keyframes cutin-swipe {
  0% {
    opacity: 0;
    transform: translateX(-60%);
  }
  30% {
    opacity: 1;
  }
  80% {
    opacity: 0.85;
    transform: translateX(8%);
  }
  100% {
    opacity: 0;
    transform: translateX(25%);
  }
}

/* ==========================================================
   1) ENEMY / TARGET INTRO ANIMATION
   ========================================================== */

/* Start state ‚Äî enemy is offscreen + transparent */
.encounter-target {
  opacity: 0;
  transform: translateY(-40px) scale(0.85);
}

/* This class gets added when encounter opens */
.encounter-target-intro {
  animation: encounterTargetIntro 0.65s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

@keyframes encounterTargetIntro {
  0% {
    opacity: 0;
    transform: translateY(-40px) scale(0.85);
  }
  60% {
    opacity: 1;
    transform: translateY(4px) scale(1.03); /* slight overshoot */
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}
/* ============================================
   WEAPON + ANIMATIONS (CLEAN VERSION)
   ============================================ */

/* Make the stage a positioning context */
.encounter-stage {
  position: relative;
}

/* Stage art (hammer + gate/boss) */
.encounter-weapon,
.encounter-target {
  z-index: 1;
}

/* UI (HP bar, text, buttons) always on top */
.encounter-ui {
  position: relative;
  z-index: 2;
}

/* Hammer visual: base state = visible, neutral */
.encounter-weapon {
  opacity: 1;
  position: absolute;
  left: 8%;
  bottom: 18%;
  width: 28%;
  height: 64%;
  pointer-events: none;
  transform: translateY(0) scale(1) rotate(0deg);
  filter: brightness(1);
  transform-origin: center bottom;

  /* OLD image path that definitely worked */
  background-image: url("icons/assets/encounter/Hammer1.png");
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center left;

  transition:
    filter 0.22s ease-out,
    transform 0.16s ease-out,
    box-shadow 0.22s ease-out;
}


/* Heavy Forge Slam intro */
.encounter-weapon-materialize {
  animation: weaponForgeSlam 1.15s cubic-bezier(0.22, 0.68, 0.14, 1.3) forwards;
  transform-origin: center bottom;
}

/* Idle breathing */
.encounter-weapon-idle {
  animation: weaponIdlePulse 3.2s ease-in-out infinite;
}

/* Class we toggle on click for the swing */
.encounter-hammer-swing {
  animation: encounterHammerSwing 0.22s ease-out;
}

/* --- Animations --- */

@keyframes weaponForgeSlam {
  0% {
    opacity: 0;
    transform: translateY(60px) scale(0.6) rotate(-12deg);
    filter: brightness(0.6);
  }
  35% {
    opacity: 1;
    transform: translateY(-6px) scale(1.08) rotate(-4deg);
    filter: brightness(1.4);
  }
  55% {
    transform: translateY(-12px) scale(1.14) rotate(2deg);
    filter: brightness(1.7);
  }
  68% {
    transform: translateY(0) scale(0.92) rotate(0deg);
    filter: brightness(1.2);
  }
  82% {
    transform: translateY(2px) scale(1.02);
  }
  100% {
    transform: translateY(0) scale(1);
    filter: brightness(1);
  }
}

@keyframes weaponIdlePulse {
  0%   { transform: translateY(0) scale(1);    filter: brightness(1); }
  50%  { transform: translateY(-1px) scale(1.02); filter: brightness(1.15); }
  100% { transform: translateY(0) scale(1);    filter: brightness(1); }
}

@keyframes encounterHammerSwing {
  0%   { transform: rotate(0deg) translateY(0); }
  25%  { transform: rotate(-18deg) translateY(-2px); }
  55%  { transform: rotate(6deg) translateY(1px); }
  100% { transform: rotate(0deg) translateY(0); }
}

/* Make sure hammer has no extra card / panel behind it */
.encounter-weapon::before,
.encounter-weapon::after {
  content: none !important;
  background: none !important;
  box-shadow: none !important;
}
/* =========================================
   ENCOUNTER LAYERING + SPACING FIX
   ========================================= */

/* Make sure the stage is a positioning context */
#encounter-overlay .encounter-stage {
  position: relative;
}

/* Hammer + boss/gate: sit ABOVE the HP bar, but ignore clicks */
#encounter-overlay .encounter-weapon,
#encounter-overlay .encounter-target {
  position: absolute;
  z-index: 0;          /* above UI visuals */
  pointer-events: none;/* clicks go to buttons underneath */
}

/* UI row (HP bar + text + buttons) just below the art in stacking order */
#encounter-overlay .encounter-ui {
  position: relative;
  z-index: 2;
}

/* Optional: tweak positions a bit so they don‚Äôt feel crowded by the bar */
#encounter-overlay .encounter-weapon {
  left: 6%;
  bottom: 28%;   /* slightly higher so it clears the bar more */
}

#encounter-overlay .encounter-target {
  right: 6%;
  bottom: 24%;   /* small lift for better balance */
}



/* Dots row above the title */
.weekly-goal-dots {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 0.45rem;
  margin-bottom: 0.9rem;
}

/* Individual dot (off state) */
.weekly-goal-dot {
  width: 9px;
  height: 9px;
  border-radius: 999px;
  background: var(--weekly-dot-off);
  border: 1px solid var(--weekly-dot-border);
  opacity: 0.6;
  box-shadow: none;
  transform: translateY(0);
  transition:
    background 0.18s ease,
    opacity 0.18s ease,
    box-shadow 0.2s ease,
    transform 0.18s ease;
}

/* Active / completed dot */
.weekly-goal-dot--active {
  background: var(--weekly-dot-on);
  opacity: 1;
  box-shadow: 0 0 14px var(--weekly-dot-on-glow);
  transform: translateY(-1px); /* tiny float for ‚Äúlit‚Äù */
}
/* =========================
   WEEKLY COMPLETION ANIMATION
   ========================= */

/* Card aura pulse when week is completed */
@keyframes weeklyCardPulse {
  0% {
    box-shadow: var(--shadow-soft);
    transform: translateY(0);
  }
  40% {
    box-shadow:
      0 0 32px var(--aura-glow),
      var(--shadow-accent-strong);
    transform: translateY(-1px);
  }
  100% {
    box-shadow: var(--shadow-soft);
    transform: translateY(0);
  }
}

.weekly-focus-card--week-complete {
  animation: weeklyCardPulse 1.1s ease-out;
}

/* Dot ‚Äúcelebrate‚Äù pop */
@keyframes weeklyDotCelebrate {
  0% {
    transform: scale(1);
    filter: brightness(1);
  }
  40% {
    transform: scale(1.45);
    filter: brightness(1.4);
  }
  100% {
    transform: scale(1);
    filter: brightness(1);
  }
}

.weekly-goal-dot--celebrate {
  animation: weeklyDotCelebrate 0.45s ease-out forwards;
}

/* Existing header/summary styles you started on */
.weekly-focus-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 0.5rem;
}

.weekly-focus-title {
  margin: 0;
}

.weekly-focus-days {
  color: var(--accent-yellow);
  font-weight: 600;
  font-size: 0.95rem;
}

.weekly-focus-summary {
  color: var(--text-muted);
  margin: 0.75rem 0 0;
  font-size: 0.95rem;
  line-height: 1.4;
}

.weekly-progress-text {
  color: var(--text-muted);
  margin: 0.35rem 0 0;
  font-size: 0.9rem;
}

.streak-body {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
    gap: 0.18rem;
}




/* Make ‚ÄúStart finisher / Mark Completed‚Äù feel special */
#finisher-do-btn {
  background-image: linear-gradient(
    135deg,
    var(--accent-warm-start),
    var(--accent-warm-end)
  );
  box-shadow: 0 18px 32px rgba(0, 0, 0, 0.9);
}




.finisher-complete-message {
    font-size: 0.95rem;
    color: var(--text-accent);                /* was var(--accent-yellow) */
    opacity: 0;
    animation: finisherMessageFade 0.4s ease-out forwards;
}

@keyframes finisherMessageFade {
    from { opacity: 0; transform: translateY(4px); }
    to   { opacity: 1; transform: translateY(0); }
}


/* ------------------------------------


/* === AFTERBURN / FINISHER ‚Äì SOFT GLOW CARD ======================= */

/* Base card */
.finisher-card {
  position: relative;
  padding: 1.5rem 1.5rem 1.7rem;
  border-radius: var(--radius-card);

  background:
    radial-gradient(circle at top left,
      rgba(255, 255, 255, 0.04),
      transparent 60%),
    radial-gradient(circle at bottom right,
      rgba(255, 255, 255, 0.02),
      transparent 55%),
    var(--surface-main);

  box-shadow:
    0 24px 50px rgba(0, 0, 0, 0.88),
    0 0 0 1px rgba(255, 255, 255, 0.05);

  color: var(--text-primary);
}

/* soft vignette on top of the card */
.finisher-card::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background:
    radial-gradient(circle at top,
      rgba(0, 0, 0, 0.55),
      transparent 65%);
  pointer-events: none;
  z-index: 0;
}

/* make real content sit above glows */
.finisher-card > * {
  position: relative;
  z-index: 1;
}

/* Header row: title + pill */
.finisher-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 0.9rem;
  margin-bottom: 1.1rem;
}

/* Let title wrap naturally, pill never gets squeezed */
.finisher-title-block {
  flex: 1;
  min-width: 0;
}

.finisher-title-block h3 {
  margin: 0 0 0.25rem;
  font-size: 1.05rem;
}

.finisher-title-block p {
  margin: 0;
  font-size: 0.9rem;
  color: var(--text-muted);
}
#finisher-title {
  min-height: 2.4rem;      /* ~2 lines */
  display: flex;
  align-items: flex-end;
}

/* Description: fixed area to prevent layout shifts */
#finisher-desc {
  min-height: 4.8rem;      /* 4‚Äì5 lines */
  display: flex;
  align-items: flex-start;
}


/* Top-right pill (category / locked state) */



/* Section label (CATEGORY / EFFORT LEVEL) */
.finisher-step-label {
  font-size: 0.75rem;
  letter-spacing: 0.16em;
  text-transform: uppercase;
  color: rgba(255, 255, 255, 0.65);
  margin: 0 0 0.4rem;
}

.finisher-status-helper {
  margin-top: 0.9rem;
  font-size: 0.85rem;
  color: var(--text-muted);
  min-height: 2.6rem;
  display: flex;
  align-items: center;
  transition: opacity 0.2s ease;
}


/* Actions row */
.finisher-actions {
  margin-top: 1.15rem;
  display: flex;
  flex-direction: column;
  gap: 0.55rem;
  text-align: center;
}

/* main primary Afterburn button */
.finisher-actions .btn.btn-primary {
  border-radius: var(--radius-pill);
  background: linear-gradient(
    135deg,
    var(--accent-primary),
    var(--accent-secondary)
  );
  box-shadow: var(--shadow-accent-strong);
}


/* secondary (Skip) */
.finisher-actions .btn.btn-outline-light {
  border-radius: var(--radius-pill);
}

/* Slightly tighter layout on smaller screens */
@media (max-width: 480px) {
  .finisher-card {
    padding: 1.3rem 1.3rem 1.5rem;
  }
}

/* === CATEGORY LIST (CONDITIONING / PUMP / etc.) ================== */

.finisher-category-list {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  margin-top: 0.75rem;
}

/* Each category tile */
.finisher-cat-btn {
  width: 100%;
  border: none;
  padding: 0.85rem 1rem;
  border-radius: 18px;
  cursor: pointer;

  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.9rem;

  background:
    radial-gradient(circle at top left,
      rgba(255, 255, 255, 0.03),
      transparent 60%),
    var(--surface-subtle);
  box-shadow:
    0 10px 26px rgba(0, 0, 0, 0.85),
    inset 0 0 0 1px rgba(255, 255, 255, 0.04);

  color: var(--text-primary);
  text-align: left;
}

/* Left block: title + subtitle */
.finisher-cat-main {
  display: flex;
  flex-direction: column;
  gap: 0.1rem;
}

.finisher-cat-title {
  font-size: 0.95rem;
  font-weight: 600;
}

.finisher-cat-subtitle {
  font-size: 0.8rem;
  color: var(--text-muted);
}

/* Right icon */
.finisher-cat-icon {
  font-size: 1.3rem;
}

/* Selected category ‚Äì soft warm glow */
.finisher-cat-btn.btn-primary {
  background:
    radial-gradient(circle at top left,
      rgba(255, 255, 255, 0.08),
      transparent 60%),
    linear-gradient(
      135deg,
      var(--accent-primary),
      var(--accent-secondary)
    );
  box-shadow:
    0 16px 36px var(--aura-strong),
    0 0 0 1px rgba(255, 255, 255, 0.08);
  color: var(--text-primary);
}


/* tiny press feedback */
.finisher-cat-btn:active {
  transform: translateY(1px) scale(0.99);
}
/* === EFFORT LEVEL CHIPS ========================================== */

.finisher-chip-row {
  display: flex;
  gap: 0.55rem;
  flex-wrap: nowrap;
}

.finisher-diff-btn {
  flex: 1;
  border-radius: var(--radius-pill);
  padding: 0.45rem 0.9rem;
  font-size: 0.86rem;
  border: 1px solid rgba(255, 255, 255, 0.16);
  background: rgba(10, 10, 18, 0.96);
  color: var(--text-primary);
}

/* selected difficulty */
.finisher-diff-btn.btn-primary {
  border-color: transparent;
  background: linear-gradient(
    135deg,
    var(--accent-primary),
    var(--accent-secondary)
  );
  box-shadow: var(--shadow-accent-soft);
}
/* === LOCKED STATE ================================================ */
.finisher-card.locked {
  opacity: 0.9;
}

/* blur / veil on top of the card */
.finisher-card.locked::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: linear-gradient(
    135deg,
    rgba(0, 0, 0, 0.55),
    rgba(0, 0, 0, 0.8)
  );
  pointer-events: none;
  z-index: 2;
}

/* keep content above ::before, below ::after */
.finisher-card.locked > * {
  position: relative;
  z-index: 3;
}

/* dim + non-interactive look for controls */
.finisher-card.locked .finisher-cat-btn,
.finisher-card.locked .finisher-diff-btn,
.finisher-card.locked .finisher-actions .btn {
  opacity: 0.55;
  cursor: default;
}

/* Locked pill style */
.finisher-card.locked {
  border-color: rgba(255, 255, 255, 0.45);
  color: var(--text-muted);
  background: transparent;
}

.finisher-tag-pill {
  flex-shrink: 0;
  width: 7rem;                  /* fixed size ‚Äì no jumping */
  padding: 0.28rem 0.5rem;
  border-radius: var(--radius-pill);
  text-align: center;

  display: inline-flex;
  align-items: center;
  justify-content: center;

  font-size: 0.7rem;
  letter-spacing: 0.16em;
  text-transform: uppercase;

  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;

  position: relative;
  isolation: isolate;

  background: rgba(0, 0, 0, 0.7);
  border: 1px solid rgba(255, 255, 255, 0.22);
  color: var(--text-muted);
}

.finisher-tag-pill::before {
  content: "";
  position: absolute;
  inset: -1px;
  border-radius: inherit;
  background: radial-gradient(
    circle at 50% 0%,
    rgba(255, 255, 255, 0.18),
    transparent 70%
  );
  opacity: 0.5;
  mix-blend-mode: screen;
  z-index: -1;
}


/* UNLOCKED state ‚Äì subtle breathing glow */
.finisher-card:not(.locked) .finisher-tag-pill {
  background:
    radial-gradient(circle at 0 0, var(--accent-warm-soft-start), transparent 70%),
    rgba(0, 0, 0, 0.85);
  border-color: rgba(255, 255, 255, 0.30);
  color: var(--text-primary);
}

.finisher-card:not(.locked) .finisher-tag-pill::before {
  animation: pillGlowSoft 4s ease-in-out infinite;
}

/* LOCKED state ‚Äì tight, bright, ‚Äúsealed‚Äù */
.finisher-card.locked .finisher-tag-pill {
  background: linear-gradient(
    130deg,
    var(--accent-primary),
    var(--accent-secondary)
  );
  border-color: transparent;
  color: #fff;
  box-shadow: 0 0 14px var(--aura-strong);
}

.finisher-card.locked .finisher-tag-pill::before {
  background: radial-gradient(
    circle at 50% 0%,
    rgba(255, 255, 255, 0.3),
    transparent 75%
  );
  opacity: 1;
  animation: pillGlowLocked 1.8s ease-in-out infinite;
}

/* Soft idle breathing */
@keyframes pillGlowSoft {
  0%   { filter: brightness(1) blur(0); }
  50%  { filter: brightness(1.15) blur(1.2px); }
  100% { filter: brightness(1) blur(0); }
}

/* Locked ‚Äúheartbeat‚Äù pulse */
@keyframes pillGlowLocked {
  0% {
    transform: translateY(0);
    box-shadow: 0 0 0 0 rgba(0, 0, 0, 0.0);
  }
  40% {
    transform: translateY(-1px);
    box-shadow: 0 0 18px 0 var(--aura-strong);
  }
  100% {
    transform: translateY(0);
    box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.7);
  }
}


/* =========================
   DIFFICULTY ROW ‚Äì make it feel designed
   ========================= */
/* Collapse by default */
#finisher-difficulties {
  margin-top: 1.5rem;
  max-height: 0;
  opacity: 0;
  overflow: hidden;
  pointer-events: none;
  transform: translateY(4px);
  transition:
    max-height 0.25s ease,
    opacity 0.2s ease,
    transform 0.2s ease;
}

/* Only layout controls for the chips ‚Äî KEEP THIS */
#finisher-difficulties .finisher-chip-row {
  display: flex;
  gap: 0.55rem;
  flex-wrap: nowrap;
}

/* Expanded state */
#finisher-difficulties.is-visible {
  max-height: 140px;
  opacity: 1;
  pointer-events: auto;
  transform: translateY(0);
}

/* =========================
   SECTION HEAD ABOVE CARD
   ========================= */

#finisher .section-head {
  margin-bottom: 0.8rem;   /* brings the card closer to the title */
}

#finisher-card.finisher-focus {
  box-shadow:
    0 0 0 1px rgba(255, 198, 92, 0.35),
    0 0 22px rgba(255, 198, 92, 0.7);
  transition: box-shadow 0.3s ease;
}



/* Continuous heartbeat aura (always on when streak is active) */
.streak-banner.streak-active::before {
  content: "";
  position: absolute;
  inset: -4px;
  border-radius: inherit;
  background:
    radial-gradient(circle at 0% 50%, var(--streak-grad-start), transparent 60%),
    radial-gradient(circle at 100% 50%, var(--streak-grad-end),   transparent 60%);
  opacity: calc(0.25 + 0.6 * var(--emblem-strength));
  filter: blur(calc(6px + 10px * var(--emblem-strength)));
  pointer-events: none;
  z-index: -1;
  animation: streakAura 3.2s ease-in-out infinite;
}

/* Heartbeat-style pulsing */
@keyframes streakAura {
    0% {
        transform: translateY(0) scale(1);
        filter: blur(6px) brightness(1);
    }
    40% {
        transform: translateY(-1px) scale(1.01);
        filter: blur(10px) brightness(1.4);
    }
    100% {
        transform: translateY(0) scale(1);
        filter: blur(6px) brightness(1);
    }
}
@keyframes streakGlowSoft {
    0%   { filter: brightness(1) blur(6px); }
    50%  { filter: brightness(1.25) blur(9px); }
    100% { filter: brightness(1) blur(6px); }
}

.emblem-weekly-1 .streak-bg-layer,
.emblem-weekly-2 .streak-bg-layer,
.emblem-weekly-3 .streak-bg-layer {
    background-image:
        radial-gradient(circle at center,
            rgba(0, 0, 0, 0.65) 0%,
            rgba(0, 0, 0, 0.35) 40%,
            transparent 70%),
        radial-gradient(circle at 0% 50%, rgba(255, 120, 80, 0.30), transparent 60%),
        radial-gradient(circle at 100% 50%, rgba(246, 195, 67, 0.25), transparent 60%);
    animation: streakGlowSoft 6s ease-in-out infinite;
}
@keyframes streakGlitterDrift {
    0% {
        background-position:
            0 0,          /* center dimmer layer stays fixed */
            0 0,
            40px 30px,
            -60px 80px;
    }
    100% {
        background-position:
            0 0,
            80px 40px,
            -40px 110px,
            120px -40px;
    }
}

.emblem-monthly-1 .streak-bg-layer,
.emblem-monthly-2 .streak-bg-layer,
.emblem-monthly-3 .streak-bg-layer {
    background-image:
        radial-gradient(circle at center,
            rgba(0, 0, 0, 0.7) 0%,
            rgba(0, 0, 0, 0.4) 40%,
            transparent 70%),
        radial-gradient(circle at 20% 15%, rgba(255, 255, 255, 0.20), transparent 60%),
        radial-gradient(circle at 80% 70%, rgba(255, 200, 120, 0.22), transparent 60%),
        radial-gradient(circle at 40% 95%, rgba(255, 150, 90, 0.18), transparent 60%);
    background-size:
        auto,
        90px 90px,
        130px 130px,
        100px 100px;
    animation: streakGlitterDrift 14s linear infinite;
}
@keyframes streakSparksSweep {
    0% {
        background-position:
            0 0,
            -120px 0,
            0 0,
            40px 80px;
    }
    100% {
        background-position:
            0 0,
            120px 0,   /* blue-ish electric band sweeps across */
            0 0,
            -40px -60px;
    }
}

.emblem-quarterly-1 .streak-bg-layer,
.emblem-quarterly-2 .streak-bg-layer,
.emblem-quarterly-3 .streak-bg-layer {
    background-image:
        radial-gradient(circle at center,
            rgba(0, 0, 0, 0.7) 0%,
            rgba(0, 0, 0, 0.45) 40%,
            transparent 70%),
        linear-gradient(120deg,
            transparent 0%,
            rgba(120, 200, 255, 0.35) 40%,
            rgba(0, 180, 255, 0.6) 50%,
            transparent 60%),
        radial-gradient(circle at 15% 80%, rgba(255, 180, 100, 0.25), transparent 65%),
        radial-gradient(circle at 90% 10%, rgba(255, 255, 255, 0.15), transparent 60%);
    background-size:
        auto,
        260px 260px,    /* big electric band */
        140px 140px,
        110px 110px;
    animation: streakSparksSweep 10s linear infinite;
}
@keyframes streakLavaFlow {
    0% {
        background-position:
            0 0,
            0 0,
            80px 0,
            -40px 40px;
    }
    100% {
        background-position:
            0 0,
            -200px 60px,
            -40px -20px,
            80px -40px;
    }
}

.emblem-annual-1 .streak-bg-layer,
.emblem-annual-2 .streak-bg-layer,
.emblem-legendary-1 .streak-bg-layer,
.emblem-legendary-2 .streak-bg-layer,
.emblem-legendary-3 .streak-bg-layer {
    background-image:
        radial-gradient(circle at center,
            rgba(0, 0, 0, 0.75) 0%,
            rgba(0, 0, 0, 0.5) 40%,
            transparent 70%),
        linear-gradient(130deg,
            rgba(120, 0, 0, 0.75),
            rgba(220, 80, 0, 0.9),
            rgba(255, 200, 80, 0.85)),
        radial-gradient(circle at 10% 90%, rgba(255, 230, 150, 0.35), transparent 65%),
        radial-gradient(circle at 95% 5%, rgba(255, 255, 255, 0.18), transparent 60%);
    background-size:
        auto,
        320px 320px,
        160px 160px,
        140px 140px;
    animation: streakLavaFlow 9s linear infinite;
}


/* Base: no reactive pattern unless emblem tier is high */
.streak-banner::after {
    content: "";
    position: absolute;
    inset: -2px;
    border-radius: inherit;
    pointer-events: none;
    opacity: 0;
    z-index: -1;
}

/* Monthly tier ‚Äì slow, subtle energy flow */
.streak-banner.emblem-monthly-1::after,
.streak-banner.emblem-monthly-2::after,
.streak-banner.emblem-monthly-3::after {
    opacity: 0.4;
    background:
        conic-gradient(
            from 0deg,
            rgba(255, 255, 255, 0.08),
            rgba(255, 160, 90, 0.18),
            rgba(255, 90, 60, 0.0),
            rgba(255, 255, 255, 0.08)
        );
    mix-blend-mode: screen;
    animation: reactiveCamoSlow 14s linear infinite;
}

/* Quarterly tier ‚Äì faster, more intense sweep */
.streak-banner.emblem-quarterly-1::after,
.streak-banner.emblem-quarterly-2::after,
.streak-banner.emblem-quarterly-3::after {
    opacity: 0.55;
    background:
        conic-gradient(
            from 0deg,
            rgba(255, 255, 255, 0.12),
            rgba(255, 190, 90, 0.3),
            rgba(255, 80, 40, 0.06),
            rgba(255, 255, 255, 0.12)
        );
    mix-blend-mode: screen;
    animation: reactiveCamoMedium 10s linear infinite;
}

/* Annual & Legendary ‚Äì wild reactive skin */
.streak-banner.emblem-annual-1::after,
.streak-banner.emblem-annual-2::after,
.streak-banner.emblem-legendary-1::after,
.streak-banner.emblem-legendary-2::after,
.streak-banner.emblem-legendary-3::after {
    opacity: 0.7;
    background:
        conic-gradient(
            from 0deg,
            rgba(255, 255, 255, 0.2),
            rgba(255, 230, 120, 0.45),
            rgba(255, 100, 40, 0.1),
            rgba(255, 255, 255, 0.2)
        );
    mix-blend-mode: screen;
    animation: reactiveCamoFast 7s linear infinite;
}


@keyframes reactiveCamoSlow {
    0%   { transform: rotate(0deg) scale(1); }
    100% { transform: rotate(360deg) scale(1); }
}

@keyframes reactiveCamoMedium {
    0%   { transform: rotate(0deg) scale(1.02); }
    100% { transform: rotate(360deg) scale(1.02); }
}

@keyframes reactiveCamoFast {
    0%   { transform: rotate(0deg) scale(1.05); }
    100% { transform: rotate(360deg) scale(1.05); }
}



/* === Post-workout overlay ‚Äì uses theme accents === */
.postworkout-overlay {
  position: fixed;
  inset: 0;
  z-index: 600;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1.5rem;

  background:
    /* warm halo that pulls from your soft accent gradients */
    radial-gradient(circle at top,
      var(--accent-warm-soft-start),
      transparent 55%),
    radial-gradient(circle at bottom,
      var(--accent-warm-soft-end),
      transparent 55%),
    rgba(0, 0, 0, 0.85);

  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
}


/* === Post-workout card ‚Äì aura tied to theme === */
.postworkout-card {
  max-width: 360px;
  width: 100%;
  padding: 1.5rem 1.75rem 1.3rem;
  border-radius: 1.25rem;

  background:
    radial-gradient(circle at top,
      var(--accent-warm-soft-start),
      transparent 55%),
    radial-gradient(circle at bottom,
      var(--accent-warm-soft-end),
      transparent 55%),
    var(--surface-main);

  border: 1px solid rgba(255, 255, 255, 0.08);
  box-shadow:
    0 18px 40px rgba(0, 0, 0, 0.85),
    /* aura color comes from your soft accent start */
    0 0 26px var(--accent-warm-soft-start);

  text-align: center;
}



.postworkout-card h2 {
    margin: 0 0 0.6rem;
    font-size: 1.3rem;
}

.postworkout-quote {
    margin: 0 0 0.4rem;
    font-size: 0.98rem;
}

.postworkout-hint {
    margin: 0 0 1rem;
    font-size: 0.85rem;
    color: var(--text-muted);
}

.postworkout-actions {
  margin-top: 1rem;
  display: flex;
  flex-direction: column;
  align-items: center;   /* center buttons horizontally */
  justify-content: center;
  gap: 0.6rem;
}

/* Make primary feel like the main CTA, full-width on mobile */
.postworkout-actions .btn {
  min-width: 0;
  width: 100%;
  max-width: 260px;      /* keeps it from becoming too wide on big screens */
  justify-content: center;
}

/* On wider screens, sit them side by side */
@media (min-width: 480px) {
  .postworkout-actions {
    flex-direction: row;
  }

  .postworkout-actions .btn {
    width: auto;
    flex: 1;
    max-width: none;
  }
}


/* Brief glow when we scroll to the finisher card */
.finisher-focus {
  box-shadow:
    var(--shadow-accent-soft),
    var(--shadow-accent-strong);
}



/* Aura when streak is active ‚Äì now uses streak tokens */
.streak-banner.streak-active {
  box-shadow:
    0 0 calc(10px + 12px * var(--emblem-strength)) var(--streak-aura-soft),
    0 0 calc(20px + 22px * var(--emblem-strength)) var(--streak-aura-strong);
}



/* === Weekly Volume Card === */
.weekly-volume-card {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

/* Stack main content vertically: icons row on top, bar below */
.volume-main {
  display: flex;
  flex-direction: column;
  gap: 1.25rem;
}

/* Top row: current hero + next silhouette */
.volume-icon-row {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1.75rem;
}

/* On small screens, let them hug a bit closer */
@media (max-width: 768px) {
  .volume-icon-row {
    gap: 1.1rem;
  }
}

/* Current object (hero) */
.volume-object {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.45rem;
}

/* HERO ICON ‚Äì bigger, no circle frame, aura + idle float */
.volume-object-icon {
  position: relative;
  width: 96px;
  height: 96px;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  filter: drop-shadow(0 0 18px var(--aura-soft));
  animation: idleFloat 3.4s ease-in-out infinite;
}

/* Aura glow behind hero */
.volume-object-icon::after {
  content: "";
  position: absolute;
  inset: -6px;
  border-radius: 999px;
  background: radial-gradient(circle,
    rgba(140, 120, 255, 0.55),
    transparent 70%);
  filter: blur(10px);
  opacity: 0.9;
  z-index: -1;
  pointer-events: none;
}

/* Label under icon */
.volume-object-label {
  font-size: 0.9rem;
  text-align: center;
  color: var(--text-muted);
}

/* --- NEXT TIER SILHOUETTE --- */
.volume-next {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.35rem;
  opacity: 0.24;
  filter: grayscale(1) blur(1px);
  transform: scale(0.9);
  pointer-events: none; /* locked vibe */
}

.volume-object-next {
  width: 72px;
  height: 72px;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}

.volume-object-next-label {
  font-size: 0.8rem;
  color: var(--text-muted);
  text-align: center;
}

/* A very subtle idle motion for the locked icon too */
.volume-object-next {
  animation: idleFloatLocked 4.6s ease-in-out infinite;
}

/* Bar side */
.volume-bar-block {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 0.35rem;
  width: 100%;
}

.volume-bar {
  position: relative;
  width: 100%;
  height: 0.55rem;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.08);
  overflow: hidden;
}

.volume-bar-fill {
  height: 100%;
  width: 0;
  border-radius: inherit;
  background: linear-gradient(
    90deg,
    var(--accent-warm-start),
    var(--accent-warm-end)
  );
  box-shadow: var(--shadow-accent-soft);
  transition: width 0.45s ease-out;
}

.volume-bar-caption {
  font-size: 0.85rem;
  color: var(--text-muted);
}

/* Existing ‚Äúlevel up‚Äù anims stay the same ‚Äì we still use these classes */
.volume-levelup .volume-bar-fill {
  animation: volumeBarExplode 0.7s ease-out;
}

.volume-object-icon.levelup-pop {
  animation: volumeEmojiPop 0.6s ease-out;
}

/* Idle float animations */
@keyframes idleFloat {
  0%, 100% { transform: translateY(0); }
  50%      { transform: translateY(-4px); }
}

@keyframes idleFloatLocked {
  0%, 100% { transform: translateY(0); }
  50%      { transform: translateY(-2px); }
}


/* --- Volume Icon PNGs --- */
.volume-object-icon.volume-icon-backpack { 
  background-image: url("icons/assets/volume_objects/backpack.png");
}

.volume-object-icon.volume-icon-car { 
  background-image: url("icons/assets/volume_objects/car.png");
}

.volume-object-icon.volume-icon-pickup{
    background-image: url("icons/assets/volume_objects/pickup.png");
}
.volume-object-icon.volume-icon-suv { 
  background-image: url("icons/assets/volume_objects/suv.png");
}

.volume-object-icon.volume-icon-truck { 
  background-image: url("icons/assets/volume_objects/delivery.png");
}

.volume-object-icon.volume-icon-tank { 
  background-image: url("icons/assets/volume_objects/tank.png");
}

.volume-object-icon.volume-icon-jet { 
  background-image: url("icons/assets/volume_objects/jet.png");
}

.volume-object-icon.volume-icon-cargo { 
  background-image: url("icons/assets/volume_objects/cargo.png");
}

.volume-object-icon.volume-icon-orbital { 
  background-image: url("icons/assets/volume_objects/satellite.png");
}
/* --- Base entrance animation (used for all icons) --- */
.volume-icon-enter {
  animation: volumeIconEnter 0.7s cubic-bezier(0.22, 0.9, 0.3, 1.1) forwards;
}

@keyframes volumeIconEnter {
  0% {
    opacity: 0;
    transform: translateY(14px) scale(0.9);
  }
  60% {
    opacity: 1;
    transform: translateY(-2px) scale(1.05);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}
.volume-icon-car.volume-icon-enter {
  animation: volumeIconDriveIn 0.8s cubic-bezier(0.22, 0.9, 0.3, 1.1) forwards;
}

@keyframes volumeIconDriveIn {
  0% {
    opacity: 0;
    transform: translateX(-22px) rotate(-8deg);
  }
  60% {
    opacity: 1;
    transform: translateX(3px) rotate(3deg);
  }
  100% {
    opacity: 1;
    transform: translateX(0) rotate(0deg);
  }
}
.volume-icon-suv.volume-icon-enter,
.volume-icon-truck.volume-icon-enter {
  animation: volumeIconDrop 0.75s cubic-bezier(0.22, 0.9, 0.3, 1.3) forwards;
}

@keyframes volumeIconDrop {
  0% {
    opacity: 0;
    transform: translateY(-24px) scale(1.15) rotate(-4deg);
  }
  50% {
    opacity: 1;
    transform: translateY(3px) scale(0.97);
  }
  100% {
    transform: translateY(0) scale(1);
  }
}
.volume-icon-tank.volume-icon-enter {
  animation: volumeIconRise 0.85s cubic-bezier(0.22, 0.9, 0.3, 1.1) forwards;
}

@keyframes volumeIconRise {
  0% {
    opacity: 0;
    transform: translateY(20px) scale(0.85);
  }
  70% {
    opacity: 1;
    transform: translateY(-3px) scale(1.05);
  }
  100% {
    transform: translateY(0) scale(1);
  }
}
.volume-icon-jet.volume-icon-enter {
  animation: volumeIconJet 0.55s ease-out forwards;
}

@keyframes volumeIconJet {
  0% {
    opacity: 0;
    transform: translateX(40px) rotate(8deg) scale(0.9);
    filter: brightness(1.4);
  }
  60% {
    opacity: 1;
    transform: translateX(-6px) rotate(-3deg) scale(1.05);
  }
  100% {
    transform: translateX(0) rotate(0deg) scale(1);
  }
}
.volume-icon-cargo.volume-icon-enter {
  animation: volumeIconFloat 1.1s ease-out forwards;
}

@keyframes volumeIconFloat {
  0% {
    opacity: 0;
    transform: translateY(18px) scale(0.92);
  }
  70% {
    opacity: 1;
    transform: translateY(-4px) scale(1.04);
  }
  100% {
    transform: translateY(0) scale(1);
  }
}
.volume-icon-orbital.volume-icon-enter {
  animation: volumeIconOrbit 1.2s ease-out forwards;
}

@keyframes volumeIconOrbit {
  0% {
    opacity: 0;
    transform: scale(0.85) rotate(-10deg);
  }
  60% {
    opacity: 1;
    transform: scale(1.06) rotate(3deg);
  }
  100% {
    transform: scale(1) rotate(0deg);
  }
}
/* --- Exit animation when switching tiers --- */
.volume-icon-exit {
  animation: volumeIconExit 0.5s ease-in forwards;
}

@keyframes volumeIconExit {
  0% {
    opacity: 1;
    transform: translateY(0) scale(1);
    filter: drop-shadow(0 0 10px var(--aura-soft));
  }
  100% {
    opacity: 0;
    transform: translateY(-14px) scale(0.9);
    filter: drop-shadow(0 0 0 rgba(0, 0, 0, 0));
  }
}

/* Slow down all weekly challenge icon entrance animations */
.volume-icon-enter {
  animation-duration: 1.4s !important; /* adjust speed here */
}


.volume-object-icon.volume-icon-backpack { 
  filter: drop-shadow(0 0 6px var(--glow-tier-1)); 
}

.volume-object-icon.volume-icon-car      { 
  filter: drop-shadow(0 0 10px var(--glow-tier-2)); 
}

.volume-object-icon.volume-icon-pickup   { 
  filter: drop-shadow(0 0 12px var(--glow-tier-3)); 
}

.volume-object-icon.volume-icon-suv      { 
  filter: drop-shadow(0 0 14px var(--glow-tier-4)); 
}

.volume-object-icon.volume-icon-truck    { 
  filter: drop-shadow(0 0 18px var(--glow-tier-5)); 
}

.volume-object-icon.volume-icon-tank     { 
  filter: drop-shadow(0 0 22px var(--glow-tier-6)); 
}

.volume-object-icon.volume-icon-jet      { 
  filter: drop-shadow(0 0 26px var(--glow-tier-7)); 
}

.volume-object-icon.volume-icon-cargo    { 
  filter: drop-shadow(0 0 30px var(--glow-tier-8)); 
}

.volume-object-icon.volume-icon-orbital  { 
  filter: drop-shadow(0 0 40px var(--glow-tier-9)); 
}


.weekly-volume-card.tier-shift .volume-bar-fill {
  animation: tierShiftPulse 0.9s ease-out;
}

@keyframes tierShiftPulse {
  0%   { box-shadow: 0 0 8px var(--accent-warm-start); }
  50%  { box-shadow: 0 0 26px var(--accent-warm-end); }
  100% { box-shadow: 0 0 12px var(--accent-warm-start); }
}

.volume-object:hover::after {
  content: attr(data-next-tier);
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  padding: 6px 10px;
  background: rgba(0,0,0,0.85);
  border-radius: 6px;
  font-size: 0.75rem;
  white-space: nowrap;
  color: white;
}






.exercise-focus-backdrop {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at top,
      var(--accent-warm-soft-start),
      transparent 55%),
    rgba(0, 0, 0, 0.86);
  backdrop-filter: blur(18px);
}

/* Card */

/* Card base state */
/* Overlay container: full-screen & centered */
.exercise-focus-overlay,
#focus-overlay {
  position: fixed;
  inset: 0;
  z-index: 9000;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1.25rem; /* small margin from edges on small screens */
}

/* When overlay is active ‚Üí animate card in */
.exercise-focus-overlay.active .exercise-focus-card,
#focus-overlay.active .exercise-focus-card {
  animation: focusCardIn 0.5s cubic-bezier(0.22, 0.9, 0.3, 1.1) forwards;
}


@keyframes focusCardIn {
  0% {
    opacity: 0;
    transform: translateY(18px) scale(0.97);
  }
  60% {
    opacity: 1;
    transform: translateY(-2px) scale(1.01); /* little overshoot */
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}



/* Header */

.exercise-focus-header {
  position: relative;
  padding-right: 2.2rem;
}

.focus-close-btn {
  position: absolute;
  top: 0.1rem;
  right: 0;
  width: 32px;
  height: 32px;
  border-radius: 999px;
  border: none;
  background: var(--surface-subtle);
  color: var(--text-primary);
  font-size: 1rem;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.08);
}

/* (This version of focus-chip is for the old "Today's Split" pill ‚Äì we‚Äôll hide it below) */
.focus-chip {
  display: inline-flex;
  align-items: center;
  padding: 0.18rem 0.6rem;
  border-radius: 999px;
  font-size: 0.7rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  background: linear-gradient(
    90deg,
    var(--accent-warm-soft-start),
    var(--accent-warm-soft-end)
  );
  color: var(--text-accent);
}

/* Set rows */


.focus-set-controls {
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
}


.focus-set-count {
  min-width: 1.75rem;
  text-align: center;
  font-weight: 600;
}



/* Weight block */

.focus-set-toggle {
  font-size: 0.78rem;
  border-radius: 999px;
  padding: 0.32rem 0.85rem;
  border: none;
  background: rgba(148, 163, 184, 0.2);
  color: #f9fafb;
}

.focus-set-row.completed .focus-set-toggle {
  background: linear-gradient(
    135deg,
    var(--accent-primary),
    var(--accent-secondary)
  );
  box-shadow: 0 0 12px var(--accent-progress-soft);
}

/* Complete exercise button */
/* Set rows */
.focus-sets-list {
  display: flex;
  flex-direction: column;
  gap: 0.65rem;
  margin-top: 0.6rem;
}

/* Single set row */
.focus-set-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.75rem;
  padding: 0.6rem 0.8rem;
  border-radius: 16px;

  background: linear-gradient(
    135deg,
    var(--surface-focus-row-start),
    var(--surface-focus-row-end)
  );
  box-shadow:
    0 0 0 1px var(--border-soft);
}

.focus-set-label {
  font-size: 0.9rem;
  font-weight: 500;
}

/* Per-set weight row */
.focus-set-weight-row {
  display: flex;
  align-items: center;
  gap: 0.4rem;
  padding: 0 0.75rem 0.35rem;
}

.focus-set-weight-input {
  flex: 1;
  padding: 0.35rem 0.6rem;
  border-radius: 10px;
  border: 1px solid var(--border-soft-strong);
  background: var(--surface-main);
  color: var(--text-primary);
  font-size: 0.9rem;
}

/* Progress row + dots */
.focus-progress-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.75rem;
}

#focus-set-progress-label {
  font-size: 0.78rem;
  color: var(--text-muted);
}

.focus-set-dots {
  display: inline-flex;
  gap: 0.35rem;
}



.focus-set-dot.active {
  box-shadow:
    0 0 0 1px var(--accent-progress-soft),
    0 0 6px  var(--accent-progress-soft);
}

.focus-set-dot.filled {
  background: var(--accent-progress);
  box-shadow:
    0 0 0 1px var(--accent-progress-soft),
    0 0 10px var(--accent-progress-soft2);
}

/* Weight block */
.focus-weight-block {
  background:
    radial-gradient(circle at top left,
      var(--accent-progress-soft2), transparent 70%),
    rgba(10, 10, 18, 0.96);
}


.focus-weight-block label {
  display: block;
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--text-accent);
  margin-bottom: 0.4rem;
}

.focus-weight-input-row {
  display: flex;
  align-items: center;
  gap: 0.4rem;
}

#focus-weight-input {
  flex: 1;
  padding: 0.38rem 0.6rem;
  border-radius: 12px;
  border: 1px solid var(--border-soft-strong);
  background: var(--surface-focus-pill);
  color: var(--text-primary);
  font-size: 0.9rem;
}

#focus-weight-input:focus {
  outline: none;
  border-color: var(--accent-progress);
  box-shadow: 0 0 0 1px var(--accent-progress-soft);
}



.focus-weight-hint {
  margin: 0.35rem 0 0;
  font-size: 0.75rem;
  color: var(--text-muted);
}

.focus-set-row.completed {
  background: radial-gradient(
      circle at top left,
      var(--accent-progress-soft),
      var(--surface-focus-row-end)
  );
  box-shadow:
    0 0 0 1px var(--accent-progress-soft2),
    0 0 16px var(--accent-progress-soft);
}


/* Weight + reps ‚Äúpills‚Äù */
.focus-set-main {
  flex: 1;
  display: flex;
  align-items: center;
  gap: 0.6rem;
  justify-content: flex-end;
}

.focus-weight-inline,
.focus-reps-control {
  display: inline-flex;
  align-items: center;
  gap: 0.45rem;
  padding: 0.4rem 0.7rem;
  border-radius: 999px;
  background: var(--surface-focus-pill);
  box-shadow: inset 0 0 0 1px var(--border-soft-strong);
}

.focus-weight-input {
  width: 4.2rem;
  border: none;
  background: transparent;
  color: var(--text-primary);
  font-size: 0.9rem;
}

.focus-weight-input:focus {
  outline: none;
}

.focus-weight-unit {
  font-size: 0.85rem;
  color: #9ca3af;
}


.focus-reps-count {
  min-width: 1.8rem;
  text-align: center;
  font-weight: 600;
}

/* Complete exercise button */
.focus-complete-btn {
  margin-top: 0.4rem;
  width: 100%;
  border-radius: var(--radius-pill);
  padding: 0.7rem 1.2rem;
  font-weight: 600;
  background: linear-gradient(
    135deg,
    var(--accent-primary),
    var(--accent-secondary)
  );
  color: #fff;
  box-shadow:
    var(--shadow-accent-strong),
    0 0 0 1px rgba(248, 250, 252, 0.08);

}

/* Add Set button */
.focus-add-set-btn {
  margin-top: 0.9rem;
  border-radius: 999px;
  padding: 0.55rem 1rem;
  font-size: 0.9rem;
  background: var(--surface-focus-pill);
  border: 1px solid var(--border-soft-strong);
}

.focus-add-set-btn:disabled {
  opacity: 0.45;
  cursor: not-allowed;
}


/* Hide the old "Today's Split" chip */
.focus-chip {
  display: none;
}

/* Exercise meta just under the title */
.focus-modalities {
  margin: 0 0 0.25rem;
  font-size: 0.9rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: rgba(248, 250, 252, 0.7);
}

#focus-exercise-name {
  margin: 0.4rem 0 0.25rem;
  font-size: 1.25rem;
  font-weight: 700;
}

.focus-subtext,
.focus-weight-unit {
  color: var(--text-muted);
}

.focus-set-badge {
  background: rgba(148, 163, 184, 0.25); /* could make a --neutral-chip-bg later */
  color: var(--text-primary);
}

.focus-set-dot {
  background: rgba(148, 163, 184, 0.4);   /* optional: create --neutral-dot-bg */
  box-shadow: 0 0 0 1px var(--border-soft-strong);
}

.focus-reps-btn {
  background: var(--surface-focus-pill);
  color: var(--text-primary);
}


.focus-set-label {
  font-size: 0.9rem;
  font-weight: 500;
}




/* Footer actions */
.focus-actions {
  margin-top: 1.3rem;
  display: flex;
  gap: 0.75rem;
}

.focus-actions .btn {
  flex: 1;
}

/* Mobile tweaks */
@media (max-width: 480px) {
  .exercise-focus-card {
    padding: 1.35rem 1.1rem 1.4rem;
  }

  .focus-set-row {
    padding-inline: 0.6rem;
  }

  .focus-set-main {
    flex-direction: row;
    justify-content: flex-end;
  }
}

/* === Focus footer layout === */
.focus-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 0.75rem;
  flex-wrap: wrap;
  margin-top: 1rem;
}

.focus-footer-left,
.focus-footer-right {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.focus-rest-btn {
  font-size: 0.85rem;
}

.focus-rest-timer-text {
  font-size: 0.85rem;
  color: var(--text-muted);
  min-width: 3.2rem;
  text-align: right;
}

.focus-rest-btn.focus-rest-active {
  border-color: var(--accent-warm-start);
  color: var(--accent-warm-start);
}

.focus-rest-timer-active .focus-rest-timer-text {
  color: var(--accent-warm-end);
}

/* Row that holds + Add Set and Rest Timer */
.focus-footer-row {
  display: flex;
  gap: 0.75rem;
  margin-top: 0.75rem;
  margin-bottom: 0.75rem;
}

/* Let them sit side-by-side and look like siblings */
.focus-add-set-btn,
.focus-rest-btn {
  flex: 1;
  justify-content: center;
}

/* Rest button "ghost" style so it's distinct from Complete */
.focus-rest-btn {
  background: rgba(255, 255, 255, 0.02);
  border: 1px solid rgba(255, 255, 255, 0.12);
  color: var(--text-subtle);
}

/* When timer is running */
.focus-rest-timer-btn {
  margin-top: 0.5rem;
  width: 100%;
  padding: 0.85rem;
  border-radius: var(--radius-pill);
  text-align: center;

  background: rgba(var(--accent-rgb), 0.08);
  border: 1px solid rgba(var(--accent-rgb), 0.25);

  color: var(--text-primary);
  font-size: 0.95rem;
  font-weight: 500;

  transition: background 0.25s ease, border-color 0.25s ease;
}


.focus-rest-timer-btn:hover {
  background: rgba(var(--accent-rgb), 0.15);
  border-color: rgba(var(--accent-rgb), 0.45);
}

/* When the timer is running */
.focus-rest-timer-btn.running {
  background: linear-gradient(
    90deg,
    var(--accent-warm-start),
    var(--accent-warm-end)
  );
  box-shadow: var(--shadow-progress);
  border-color: transparent;
  color: var(--text-primary);
  font-weight: 600;
}

/* When timer is finished */
.focus-rest-timer-btn.finished {
  background: rgba(var(--accent-warm-start-rgb), 0.2);
  border-color: rgba(var(--accent-warm-start-rgb), 0.4);
  color: var(--text-accent);
}


.focus-rest-btn.rest-done-ping {
  animation: restTimerPing 0.8s ease-out;
}


/* Split card container */
/* Split card container ‚Äì Today‚Äôs Split */
.today-split-card {
  background: var(--surface-main);       /* was #090b12 */
  border-radius: var(--radius-card);     /* shared radius */
  padding: 1.25rem 1.25rem 1.5rem;
  border: 1px solid var(--card-border);
  box-shadow: var(--shadow-soft);
}


/* Individual exercise row */
/* Individual exercise row */
.exercise-row {
  position: relative;
  display: flex;
  align-items: flex-start;
  gap: 0.9rem;
  padding: 0.85rem 0.9rem;
  border-radius: 1rem;
  overflow: hidden;
  background: var(--surface-subtle);
  transition:
    background 0.16s ease,
    transform 0.12s ease,
    opacity 0.3s ease,
    filter 0.3s ease;
}

.exercise-row + .exercise-row {
  margin-top: 0.25rem;
}

.exercise-row:active {
  transform: scale(0.99);
}

.exercise-row::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  z-index: 0;

  background:
    radial-gradient(
      120% 160% at 50% 0%,
      var(--accent-warm-soft-start),
      var(--accent-warm-soft-end),
      rgba(0, 0, 0, 0.18)
    );

  opacity: 0.9;
  transition: opacity 0.35s ease, transform 0.35s ease;
}


/* make sure row content sits above glow */
.exercise-row > * {
  position: relative;
  z-index: 1;
}

/* When exercise is completed ‚Üí glow off + dim card */
.exercise-row.completed::after {
  opacity: 0;
  transform: scale(0.92);
}

.exercise-row.completed {
  animation: exerciseCompleteBounce 0.35s ease-out forwards;
  background: rgba(255, 255, 255, 0.02); /* middle ground between 0.015 & 0.03 */
}



/* Checkbox block */
.exercise-checkbox {
  margin-top: 0.3rem;
}

/* Right side column (name + weight) */
.exercise-main {
  flex: 1;
}

/* Exercise name as tappable text */

/* Make it feel tappable without screaming ‚Äúbutton‚Äù */
.exercise-name-btn span.exercise-focus-tag {
  font-size: 0.78rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  font-weight: 600;
  color: var(--accent-yellow);
}

.exercise-name-btn:active {
  transform: translateY(1px);
}

/* Subtle underline ‚Äúon press‚Äù only */
.exercise-name-btn:active,
.exercise-name-btn:focus-visible {
  text-decoration: underline;
}

/* Weight row */
.exercise-weight-row {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.82rem;
  color: var(--text-muted);
}

/* Weight input styling */
.exercise-weight-row input[type="number"] {
  flex: 0 0 120px;
  max-width: 140px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.22);
  background: rgba(16, 18, 28, 0.95);
  padding: 0.35rem 0.6rem;
  color: #ffffff;
  font-size: 0.82rem;
}

.exercise-weight-row input[type="number"]:focus {
  outline: none;
  border-color: var(--accent-yellow);
}

/* Hide the physical checkbox squares */
.exercise-checkbox input[type="checkbox"] {
  position: absolute;
  opacity: 0;
  width: 0;
  height: 0;
}

/* optional: remove the checkbox column spacing if you want */
.exercise-checkbox {
  width: 0;
  margin: 0;
  padding: 0;
}
/* Row looks done */
.exercise-row.completed .exercise-name-btn {
  text-decoration: line-through;
  opacity: 0.7;
}

/* You can also slightly dim the weight row if you want */
.exercise-row.completed .exercise-weight-row {
  opacity: 0.6;
}
.exercise-meta-row {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  font-size: 0.8rem;
  margin-top: 0.15rem;
  color: var(--text-muted);
}

.exercise-meta-label {
  letter-spacing: 0.02em;
}

.exercise-meta-value {
  font-weight: 600;
  color: var(--accent-yellow);
}

/* helper input is invisible but still usable in JS */
.exercise-weight-hidden {
  position: absolute;
  opacity: 0;
  pointer-events: none;
  width: 0;
  height: 0;
}
.exercise-complete-checkbox {
  position: absolute;
  opacity: 0;
  pointer-events: none;
}

.exercise-meta-row {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  font-size: 0.8rem;
  margin-top: 0.15rem;
  color: var(--text-muted);
}

.exercise-meta-label {
  letter-spacing: 0.02em;
}

.exercise-meta-value {
  font-weight: 600;
  color: var(--accent-yellow);
}

/* === Exercise pill inside Today's Split card === */
.exercise-name-btn {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.75rem;

  width: 100%;
  margin: 0 0 0.35rem;
  padding: 0.7rem 1rem;

  border-radius: 1rem;
  border: 1px solid rgba(255, 255, 255, 0.08);

  /* üî• main gradient */
  background-image: linear-gradient(
    90deg,
    var(--accent-warm-start),
    var(--accent-warm-end)
  );

  /* üßΩ fix skinny lines at left/right */
  background-size: 110% 100%;
  background-position: center;
  background-clip: padding-box;
  -webkit-background-clip: padding-box;

  color: var(--text-primary);
  font-size: 1rem;
  font-weight: 600;
  text-align: left;
  cursor: pointer;
  outline: none;
}

/* Small press feedback */
.exercise-name-btn:active {
  transform: scale(0.97);
}


.exercise-name-text-block {
  display: flex;
  flex-direction: column;
  gap: 0.05rem;
}

.exercise-name-title {
  font-weight: 600;
}

.exercise-name-subtitle {
  font-size: 0.75rem;
  color: var(--text-muted);
}

.exercise-name-chevron {
  font-size: 1.1rem;
  line-height: 1;
  opacity: 0.8;
}

.exercise-name-btn:active {
  transform: scale(0.97);
  background: rgba(255, 255, 255, 0.08);
}
/* === Exercise Focus Overlay (single source of truth) === */
#focus-overlay {
  position: fixed;
  inset: 0;
  z-index: 1200;
  display: flex;
  align-items: center;
  justify-content: center;

  padding: 1.25rem;
  background:
    radial-gradient(circle at top,
      var(--accent-warm-soft-start),
      transparent 55%),
    radial-gradient(circle at bottom,
      var(--accent-warm-soft-end),
      transparent 55%),
    rgba(0, 0, 0, 0.9);

  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);

  opacity: 0;
  pointer-events: none;
}

/* When JS adds .active */
#focus-overlay.active {
  opacity: 1;
  pointer-events: auto;
}

/* When JS adds .hidden */
#focus-overlay.hidden {
  display: none;
}


/* Skip button where "3 days/week" used to be */
/* Skip button where "3 days/week" used to be */
.split-skip-btn {
  border-radius: 999px;
  border: 1px solid var(--card-border);
  background: rgba(255, 255, 255, 0.02);
  color: var(--text-muted);
  font-size: 0.8rem;
  padding: 0.35rem 0.9rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
}

.split-skip-btn:hover {
  background: rgba(var(--accent-warm-start-rgb), 0.18);
  border-color: rgba(var(--accent-warm-start-rgb), 0.65);
}


.split-skip-btn:active {
  transform: translateY(1px);
}

.split-skip-btn--disabled {
  opacity: 0.5;
  cursor: default;
}

/* When the day is marked as skipped */
.today-split-card.split-skipped {
  opacity: 0.8;
}

.exercise-row.skipped-message {
  padding: 0.9rem 1rem;
  border-radius: 1rem;
  background: var(--surface-subtle);
  font-size: 0.9rem;
}

.exercise-skip-title {
  font-weight: 600;
  margin-bottom: 0.25rem;
}

.exercise-skip-sub {
  font-size: 0.8rem;
  color: var(--text-muted);
}

.skip-today-btn {
  padding: 0.35rem 0.9rem;
  border-radius: 999px;
  border: 1px solid var(--card-border);
  background: rgba(15, 15, 23, 0.95);
  color: var(--text-muted);
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  cursor: pointer;
}

.skip-today-btn:active {
  transform: translateY(1px);
}

.workout-card--skipped {
  opacity: 0.6;
}

.workout-card--skipped .exercise-name-title {
  text-decoration: line-through;
}

/* --- Exercise Completion Bounce --- */
@keyframes exerciseCompleteBounce {
  0% {
    transform: scale(1);
    opacity: 1;
  }
  35% {
    transform: scale(1.05);
  }
  60% {
    transform: scale(0.97);
  }
  100% {
    transform: scale(1);
    opacity: 0.45;
    filter: grayscale(0.6);
  }
}

/* ===== Training History Heatmap (Heat.js style) ===== */

.history-heatmap-wrap{
  max-height:0;
  opacity:0;
  transform: translateY(-6px);
  overflow:hidden;
  pointer-events:none;
  transition: max-height .45s ease, opacity .22s ease, transform .22s ease;
}

.history-card.history-expanded .history-heatmap-wrap{
  max-height: 520px;
  opacity:1;
  transform: translateY(0);
  pointer-events:auto;
}

.history-heatmap-shell{
  margin-top: 1rem;
  display: grid;
  grid-template-columns: 34px 1fr; /* DOW labels + map */
  gap: .6rem;
  align-items: start;
}
/* Weekday column aligns to grid rows */
.history-dow-col{
  display: grid;
  grid-template-rows: repeat(7, 16px);
  gap: .35rem;
  padding-top: calc(16px + .45rem); /* month row height + its margin-bottom */
}

.history-dow{
  font-size: .72rem;
  color: var(--text-muted);
  opacity: .8;
  line-height: 16px;
}

/* Month labels must use the SAME column sizing as the grid */
.history-month-row{
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: 16px;  /* MUST match squares */
  gap: .35rem;              /* MUST match grid gap */
  height: 16px;             /* lock height */
  align-items: center;
  margin-bottom: .45rem;
}

.history-month-label{
  font-size: .75rem;
  color: var(--text-muted);
  white-space: nowrap;
  line-height: 16px;
  transform: none;
  opacity: .85;
}

/* Heatmap grid: column-flow so weeks can be 13 OR 14 depending on start offset */
.history-heatmap-grid{
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: 16px;  /* MUST match squares */
  grid-template-rows: repeat(7, 16px);
  gap: .35rem;
}

/* button cell */
.history-hm-day{
  border: none;
  padding: 0;
  background: transparent;
  width: 16px;
  height: 16px;
}

/* visible square */
.history-hm-dot{
  display:block;
  width:16px;
  height:16px;
  border-radius: 5px;
  background: rgba(255,255,255,0.03);
  box-shadow: 0 0 0 1px rgba(255,255,255,0.07);
}

/* intensity classes live on the DOT (matches your JS) */
.history-hm-dot.history-hm-i0{
  background: rgba(255,255,255,0.03);
}

.history-hm-dot.history-hm-i1{
  background: rgba(var(--accent-warm-start-rgb), 0.35);
  box-shadow: 0 0 8px rgba(var(--accent-warm-start-rgb), 0.45);
}

.history-hm-dot.history-hm-i2{
  background: rgba(var(--accent-warm-start-rgb), 0.60);
  box-shadow: 0 0 12px rgba(var(--accent-warm-start-rgb), 0.75);
}

.history-hm-dot.history-hm-i3{
  background: rgba(var(--accent-warm-start-rgb), 0.90);
  box-shadow:
    0 0 14px rgba(var(--accent-warm-start-rgb), 0.95),
    0 0 22px var(--aura-glow);
}

/* today outline */
.history-hm-today .history-hm-dot{
  box-shadow:
    0 0 0 1px rgba(255,255,255,0.35),
    0 0 14px rgba(var(--accent-warm-start-rgb), 0.65);
}

/* padding cells before start date */
.history-hm-pad .history-hm-dot{
  opacity: .25;
}

    </style>

</head>

<body>
    <header>
        <nav>
            <div class="logo">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round" style="margin-right:4px;">
                    <path
                        d="M12 21s-6.9-4.4-9.5-8.3C.8 9.7 2.2 5.8 5.4 4.3c2-.9 4.3-.2 5.6 1.4 1.3-1.6 3.6-2.3 5.6-1.4 3.2 1.5 4.6 5.4 2.9 8.4C18.9 16.6 12 21 12 21z" />
                    <polyline points="6 12 9 12 11 8 13 16 15 12 18 12" />
                </svg>
                Iron Pulse           
            </div>
            

            <div class="nav-actions">
                <button class="btn btn-outline" id="open-settings-btn">Setup</button>
                <button class="btn btn-primary" id="hero-cta">Start Today</button>
            </div>

        </nav>
    </header>

    <main>
        
    <div id="screen-setup">
        <!-- HERO / INTRO -->
        <section class="hero">
            <div>
                <p class="badge" style="letter-spacing:2px;">Daily Grind - No Excuses</p>
                <h1>Build strength, discipline, and a body you are proud of.</h1>
                <p>
                    Iron Pulse is your training partner. Follow structured workouts, track intensity,
                    and get the motivation you need to stay consistent, even when the weights feel heavy.
                </p>
    
                <div style="display:flex;gap:1rem;flex-wrap:wrap;margin-top:2rem;">
                    <button class="btn btn-primary" id="add-to-home-btn">
                        Add to Home Screen
                    </button>
    
                    <a class="btn btn-outline" href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" target="_blank"
                        rel="noopener noreferrer">
                        Watch Trailer
                    </a>
                </div>
    
                <!-- EXPLAINER CARDS -->
                <div class="intro-grid" style="margin-top:2rem;">
                    <article class="workout-card intro-card">
                        <strong class="card-title">Weekly Focus</strong>
                        <p class="card-desc">
                            Choose how many days you want to train this week. Iron Pulse builds a plan to match your
                            schedule.
                        </p>
                    </article>
    
                    <article class="workout-card intro-card">
                        <strong class="card-title">Today's Split</strong>
                        <p class="card-desc">
                            Open the app each day to see a clear workout. Simple, structured, and easy to follow.
                        </p>
                    </article>
    
                    <article class="workout-card intro-card">
                        <strong class="card-title">Optional Aferburn</strong>
                        <p class="card-desc">
                            Finish your workout strong. Complete your split to unlock a short, optional challenge when you've still got something
                            left in the tank.
                        </p>
                    </article>
    
                    <article class="workout-card intro-card">
                        <strong class="card-title">Streaks + Rest Days</strong>
                        <p class="card-desc">
                            Track your consistency and earn Rest Tokens to stay motivated without burning out.
                        </p>
                    </article>
                </div>
            </div>
        </section>
    

        <!-- WEEKLY GOAL PREVIEW (VISUAL ONLY) -->
        <section class="section" id="weekly-goal">
            <div class="section-head">
                <h2>Weekly Training Goal</h2>
                <p style="color:var(--text-muted);max-width:520px;">
                    Decide how many days you're committing to this week. Iron Pulse measures success against that goal, not perfection.
                </p>
            </div>
    
            <article class="workout-card">
                <p style="margin-top:0;color:var(--text-muted);">
                    I'm aiming to train this many days this week:
                </p>
    
                <div class="weekly-goal-preview" style="display:flex;flex-wrap:wrap;gap:0.5rem;margin-bottom:1rem;">
                    <span class="day-pill-preview" data-days="3">3 days</span>
                    <span class="day-pill-preview" data-days="4">4 days</span>
                    <span class="day-pill-preview" data-days="5">5 days</span>
                    <span class="day-pill-preview" data-days="6">6 days</span>
                    <span class="day-pill-preview" data-days="7">7 days</span>
                </div>
            </article>
        </section>
    
        <!-- INSTALL INSTRUCTIONS -->
        <section class="section" id="install">
            <div class="section-head">
                <h2>Install Iron Pulse as an App</h2>
                <p style="color:var(--text-muted);max-width:520px;">
                    Add Iron Pulse to your home screen so it opens like a dedicated gym app before every session.
                </p>
            </div>
    
            <div class="grid">
                <article class="workout-card">
                    <h3>On Android (Chrome)</h3>
                    <ul>
                        <li>1. Open this page in Chrome.</li>
                        <li>2. Tap the menu button (‚ãÆ) in the top-right.</li>
                        <li>3. Tap <strong>Add to Home screen</strong> or <strong>Install app</strong>.</li>
                        <li>4. Confirm, then open it from your home screen like any other app.</li>
                    </ul>
                </article>
    
                <article class="workout-card">
                    <h3>On iPhone (Safari)</h3>
                    <ul>
                        <li>1. Open this page in Safari.</li>
                        <li>2. Tap the <strong>Share</strong> button (square with arrow).</li>
                        <li>3. Scroll down and tap <strong>Add to Home Screen</strong>.</li>
                        <li>4. Name it ‚ÄúIron Pulse‚Äù and tap <strong>Add</strong>.</li>
                    </ul>
                </article>
            </div>
        </section>
    </div>
  
        
<div id="screen-daily">

    <div id="streak-banner" class="hidden">
        <div class="streak-banner">
            <div class="streak-bg-layer"></div>
    
            <div class="streak-emblem-wrapper">
                <div id="streak-emblem" class="rankup-emblem-preview streak-emblem">
                    <span class="streak-emblem-icon">üî•</span>
                </div>
            </div>
    
            <div class="streak-body">
                <div class="streak-row streak-row-top">
                    <span id="streak-week-label" class="streak-pill"></span>
                    <span id="streak-token-label" class="streak-pill streak-pill-secondary"></span>
                    <span id="streak-emblem-label" class="streak-pill streak-pill-emblem hidden"></span>
                </div>
    
                <div class="streak-row">
                    <span id="streak-text" class="streak-progress-label"></span>
                </div>
    
                <div class="streak-progress">
                    <div class="streak-progress-fill" id="streak-progress-fill"></div>
                </div>
            </div>
        </div>
    </div>


<section class="section" id="weekly-focus-live">
    <article class="workout-card weekly-focus-card" id="weekly-focus-card">

        <!-- weekly goal dots row -->
        <div class="weekly-goal-dots" id="weekly-goal-dots">
            <!-- JS will inject dot elements here -->
        </div>

        <div class="weekly-focus-header">
            <h3 class="weekly-focus-title">Training Goal</h3>
            <span id="weekly-focus-days-label" class="weekly-focus-days">
                5 days / week
            </span>
        </div>

        <p id="weekly-focus-summary" class="weekly-focus-summary">
            You're aiming for 5 days. Higher frequency, slightly smaller sessions so you can show up often without
            burning out.
        </p>

        <p id="weekly-progress-text" class="weekly-progress-text">
            <!-- JS: X of Y sessions completed -->
        </p>
        <div class="weekly-day-row" id="weekly-day-row"></div>

<section id="training-history" class="section">
  <div class="section-head history-head">
    <div>
      <h2>Training History</h2>
    </div>

    <button id="history-toggle-btn" class="history-toggle-btn" type="button" aria-expanded="false">
      Last 90 days <span class="history-toggle-chevron">‚ñæ</span>
    </button>
  </div>

  <div class="history-card" id="history-card">
    <div class="history-header-row">
      <div>
        <div class="history-days-logged" id="history-days-logged">0 days logged</div>
        <div class="history-subcopy">Streaks stack one week at a time.</div>
      </div>
    </div>

    <div class="history-intensity-legend">
      <span>Intensity</span>
      <div class="history-intensity-dots" aria-hidden="true">
        <span class="history-dot history-dot-0"></span>
        <span class="history-dot history-dot-1"></span>
        <span class="history-dot history-dot-2"></span>
        <span class="history-dot history-dot-3"></span>
      </div>
    </div>

    <!-- Expand/collapse area -->
    <div class="history-heatmap-wrap" id="history-heatmap-wrap">
      <div class="history-heatmap-shell">
        <div class="history-dow-col" aria-hidden="true">
          <div class="history-dow">Mon</div>
          <div class="history-dow">Tue</div>
          <div class="history-dow">Wed</div>
          <div class="history-dow">Thu</div>
          <div class="history-dow">Fri</div>
          <div class="history-dow">Sat</div>
          <div class="history-dow">Sun</div>
        </div>

        <div class="history-heatmap-main">
          <div id="history-month-row" class="history-month-row"></div>
          <div id="history-heatmap-grid" class="history-heatmap-grid"></div>
        </div>
      </div>

    </div>
  </div>
</section>



    </article>
</section>




<section id="weekly-volume" class="section">
    <div class="section-head">
        <h2>This Week's Volume</h2>
    </div>

    <div class="workout-card weekly-volume-card">
        <div class="volume-main">
            <!-- NEW: icon row (current + next) -->
            <div class="volume-icon-row">
                <!-- Current tier -->
                <div class="volume-object">
                    <div id="volume-object-icon" class="volume-object-icon" data-emoji="üöó">
                    </div>
                    <div id="volume-object-label" class="volume-object-label">
                        Small backpack
                    </div>
                </div>

                <!-- Next tier silhouette -->
                <div class="volume-next" id="volume-next">
                    <div id="volume-object-next" class="volume-object-next"></div>
                    <div id="volume-object-next-label" class="volume-object-next-label">
                        Next tier
                    </div>
                </div>
            </div>

            <!-- Progress bar + caption -->
            <div class="volume-bar-block">
                <div class="volume-bar">
                    <div id="volume-bar-fill" class="volume-bar-fill"></div>
                </div>
                <div id="volume-bar-caption" class="volume-bar-caption">
                    You've moved 0 lbs so far ‚Äî let's get that bar moving.
                </div>
            </div>
        </div>
    </div>
</section>


    <div id="daily-main-content">


        <section class="section" id="split">
            <div class="section-head">
                <h2>Today's Split</h2>
            </div>
            




        
            <div class="workout-card today-split-card">
                <div style="display:flex;justify-content:space-between;align-items:center;">
                    <h3 id="split-name">Loading split...</h3>
                    <button id="split-days" type="button" class="skip-today-btn">
                        Skip today
                    </button>
                </div>
            
                <p id="split-description" style="color:var(--text-muted);margin:0 0 1rem 0;">
                    <!-- Filled by JavaScript -->
                </p>
            
                <ul id="exercise-list" style="list-style:none;padding:0;margin:0;color:var(--text-muted);">
                    <!-- Exercises will be injected here -->
                </ul>
            </div>


        </section>

        <section class="section" id="finisher">
            <div class="section-head finisher-head">
                <h2>Today's Afterburn</h2>
                <span class="finisher-subcopy">
                    Optional extra work once today's main sets are done.
                </span>
            </div>

        
            <div id="finisher-card" class="finisher-card locked">
                <div class="finisher-header">
                    <div class="finisher-title-block">
                        <span class="finisher-mission-label">OPTIONAL</span> <!-- üëà add this -->

                        <h3 id="finisher-title">Choose Your Afterburn</h3>
                        <p id="finisher-description">
                            Pick a category and difficulty, then hit <strong>Lock In</strong> start today's Afterburn session.
                        </p>
                    </div>

                    <span class="finisher-tag-pill" id="finisher-tag">LOCKED</span>
                </div>
            
                <!-- STEP 1: CATEGORY -->
                <div class="finisher-step">
                    <p class="finisher-step-label">Category</p>
                
                    <div class="finisher-category-list">
                        <!-- Conditioning -->
                        <button type="button" class="finisher-cat-btn" data-category="conditioning">
                            <div class="finisher-cat-main">
                                <span class="finisher-cat-title">Conditioning</span>
                                <span class="finisher-cat-subtitle">Heart, lungs, sweat.</span>
                            </div>
                            <span class="finisher-cat-icon">üèÉ‚Äç‚ôÇÔ∏è</span>
                        </button>
                
                        <!-- Bodyweight -->
                        <button type="button" class="finisher-cat-btn" data-category="bodyweight">
                            <div class="finisher-cat-main">
                                <span class="finisher-cat-title">Bodyweight</span>
                                <span class="finisher-cat-subtitle">Push-ups, dips, holds.</span>
                            </div>
                            <span class="finisher-cat-icon">ü§∏‚Äç‚ôÇÔ∏è</span>
                        </button>
                
                        <!-- Pump -->
                        <button type="button" class="finisher-cat-btn" data-category="pump">
                            <div class="finisher-cat-main">
                                <span class="finisher-cat-title">Pump</span>
                                <span class="finisher-cat-subtitle">High reps, big burn.</span>
                            </div>
                            <span class="finisher-cat-icon">üí™</span>
                        </button>
                
                        <!-- Recovery -->
                        <button type="button" class="finisher-cat-btn" data-category="recovery">
                            <div class="finisher-cat-main">
                                <span class="finisher-cat-title">Recovery</span>
                                <span class="finisher-cat-subtitle">Mobility, breathing, chill.</span>
                            </div>
                            <span class="finisher-cat-icon">üßò‚Äç‚ôÇÔ∏è</span>
                        </button>
                    </div>
                </div>

            
                <!-- STEP 2: DIFFICULTY -->
                <!-- STEP 2: DIFFICULTY -->
                <div class="finisher-step finisher-step--difficulty" id="finisher-difficulties">
                    <p class="finisher-step-label">Afterburn Level</p>

                    <div class="finisher-chip-row">
                        <button type="button" class="btn finisher-chip finisher-diff-btn" data-difficulty="easy">
                            Easy
                        </button>
                        <button type="button" class="btn finisher-chip finisher-diff-btn" data-difficulty="standard">
                            Standard
                        </button>
                        <button type="button" class="btn finisher-chip finisher-diff-btn" data-difficulty="hard">
                            Hard
                        </button>
                    </div>
                </div>
            
                <!-- STATUS / EXPLANATION -->
                <p id="finisher-status" class="finisher-status-helper">
                  
                </p>
            
                <!-- ACTIONS -->
                <div class="finisher-actions">
                    <button id="finisher-do-btn" class="btn btn-primary btn-lg" disabled>
                        Mark Completed
                    </button>
                    <button id="finisher-skip-btn" class="btn btn-outline-light btn-lg" disabled>
                        Skip for Today
                    </button>
                </div>
            </div>


        </section>
    </div>

<div style="padding:1rem; text-align:center; margin-top:2rem;">
    <button type="button" id="dev-gate-btn"
        style="padding:0.8rem 1.2rem; border-radius:10px; background:#444; color:white;">
        Test Gate Encounter (from stats)
    </button>
</div>
<button type="button" id="dev-boss-btn"
    style="padding:0.8rem 1.2rem; border-radius:10px; background:#444; color:white;">
    Test Boss Encounter
</button>

<button type="button" id="dev-complete-weekly-btn"
    style="padding:0.8rem 1.2rem; border-radius:10px; background:#333; color:white; margin-top:10px;">
    Test: Complete Weekly Goal
</button>
<button id="dev-clear-volume-btn" class="btn btn-outline">Reset Volume (DEV)</button>
<button id="dev-reset-streak-btn" class="btn btn-outline">Reset Weekly Streak (DEV)</button>

        <section class="section" id="weekly-goal-control">
            <article class="workout-card">
                <p style="color:var(--text-muted);margin:0 0 0.5rem;">
                    Choose this week's training goal:
                </p>
                <div>
                    <button class="day-pill" data-days="3">3 Days</button>
                    <button class="day-pill" data-days="4">4 Days</button>
                    <button class="day-pill" data-days="5">5 Days</button>
                    <button class="day-pill" data-days="6">6 Days</button>
                    <button class="day-pill" data-days="7">7 Days</button>
                </div>
        
                <!-- üîπ New: Commit button (hidden until a pill is chosen) -->
                <button class="btn btn-primary" id="commit-weekly-goal-btn"
                    style="margin-top:0.75rem;font-size:0.85rem;display:none;">
                    Commit!!!
                </button>
        
                <!-- üîπ Existing: reset button (only shown after a goal exists) -->
                <button class="btn btn-outline" id="reset-weekly-goal-btn" style="margin-top:0.75rem;font-size:0.85rem;">
                    Reset Weekly Goal
                </button>
            </article>
        </section>

</div>
    </main>

    <footer>
        <p>Iron Pulse Collective - Built for the relentless - Train hard, recover harder.</p>
    </footer>
<div class="bottom-bar">
    <button class="btn btn-primary bottom-bar-btn" id="bottom-split-btn">
        Get Started
    </button>
</div>

<!-- Focus Card Overlay -->
<div id="focus-overlay" class="exercise-focus-overlay hidden">
    <div class="exercise-focus-backdrop"></div>

    <div class="exercise-focus-card">
        <!-- Header -->
        <header class="exercise-focus-header">
            <!-- we‚Äôll hide this chip in CSS, title does the job now -->
            <div class="focus-chip">Today's split</div>
            <button type="button" id="focus-close-btn" class="focus-close-btn" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </header>

        <!-- Exercise title + meta -->
        <h2 id="focus-exercise-name">Bench Press</h2>

        <p id="focus-exercise-modalities" class="focus-modalities">
            Barbell ¬∑ Dumbbell ¬∑ Machine
        </p>

        <p id="focus-exercise-description" class="focus-subtext">
            Press horizontally with control. Focus on chest and triceps.
        </p>

    <!-- Sets list -->
    <div id="focus-sets-list" class="focus-sets-list"></div>
    
    <!-- Footer row: Add Set + Rest Timer -->
    <div class="focus-footer-row">
        <button type="button" id="focus-add-set-btn" class="btn focus-add-set-btn">
            + Add Set
        </button>
    
        <button type="button" id="focus-rest-btn" class="btn focus-rest-btn">
            <span id="focus-rest-label">Rest Timer</span>
        </button>
    </div>
    
    <!-- Actions -->
    <div class="focus-actions">
        <button type="button" id="focus-cancel-btn" class="btn btn-outline">
            Cancel
        </button>
        <button type="button" id="focus-complete-btn" class="btn btn-primary">
            Complete
        </button>
    </div>

    </div>

    </div>
</div>


<script src="app.js"></script>

<!-- DEBUG ONLY: streak tester -->
<button id="debug-streak-plus" style="
    position: fixed;
    bottom: 1rem;
    right: 1rem;
    z-index: 9999;
    padding: 0.4rem 0.8rem;
    font-size: 0.7rem;
    border-radius: 999px;
    border: 1px solid rgba(255,255,255,0.25);
    background: rgba(0,0,0,0.75);
    color: #fff;
    text-transform: uppercase;
    letter-spacing: 0.08em;
  ">
    +1 Week Streak
</button>

</body>

</html>
